# üîô üìö üîú –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫—É—Ä—Å—É

| [–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/PR17.MD) | &nbsp; | [–°–ª–µ–¥—É—é—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/PR18.MD) |
|:--------------------------------------:|:------:|:-------------------------------------:|
| üè† [–ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ17](../LESSONS/PR17.MD) | üìñ [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](../README.MD) | üíª [–ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ18](../LESSONS/PR18.MD) |

---

# üéì –õ–µ–∫—Ü–∏—è 18. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: –ø–æ–ª–Ω–æ–µ, –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –¥–æ —Ç–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞

‚è±Ô∏è **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 90 –º–∏–Ω—É—Ç  
üéØ **–¶–µ–ª—å –ª–µ–∫—Ü–∏–∏:**  
–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —É —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –≤ SQL Server. –ù–∞—É—á–∏—Ç—å —Ä–∞–∑–ª–∏—á–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (–ø–æ–ª–Ω–æ–µ, –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –¥–æ —Ç–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞), –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏ –∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã T-SQL. –†–∞–∑–æ–±—Ä–∞—Ç—å —Ç–∏–ø–æ–≤—ã–µ –æ—à–∏–±–∫–∏ –∏ –æ—Ç—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–≤—ã–∫–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏.

## üìñ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–µ—Ä–º–∏–Ω–æ–≤ (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏–∑ —Ä—É—Å—Å–∫–æ–π SSMS)

| –†—É—Å—Å–∫–∏–π —Ç–µ—Ä–º–∏–Ω | –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç | –ß—Ç–æ —ç—Ç–æ? | –ü—Ä–∏–º–µ—Ä |
|----------------|------------------------|----------|--------|
| –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ | Restore | –ü—Ä–æ—Ü–µ—Å—Å –≤–æ–∑–≤—Ä–∞—Ç–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ | `RESTORE DATABASE ...` |
| –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ | Full restore | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ–π –±–∞–∑—ã –∏–∑ –ø–æ–ª–Ω–æ–π –∫–æ–ø–∏–∏ | `RESTORE DATABASE ... WITH RECOVERY` |
| –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ | Point-in-Time Recovery (PITR) | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ | `STOPAT = '2026-03-01 14:35:00'` |
| –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ —Ç–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞ | Restore to point of failure | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –¥–æ –º–æ–º–µ–Ω—Ç–∞ —Å–±–æ—è | –ü–æ–ª–Ω–∞—è + —Ä–∞–∑–Ω–æ—Å—Ç–Ω—ã–µ + –≤—Å–µ –∂—É—Ä–Ω–∞–ª—ã |
| –°–æ—Å—Ç–æ—è–Ω–∏–µ RECOVERY | RECOVERY state | –ë–∞–∑–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ | `WITH RECOVERY` |
| –°–æ—Å—Ç–æ—è–Ω–∏–µ NORECOVERY | NORECOVERY state | –ë–∞–∑–∞ –æ–∂–∏–¥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–ø–∏–∏, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ | `WITH NORECOVERY` |
| –°–æ—Å—Ç–æ—è–Ω–∏–µ STANDBY | STANDBY state | –ë–∞–∑–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è –º–µ–∂–¥—É –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è–º–∏ –∂—É—Ä–Ω–∞–ª–æ–≤ | `WITH STANDBY` |
| –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è | Restore sequence | –ù–∞–±–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–π RESTORE, –ø—Ä–∏–º–µ–Ω—è–µ–º—ã—Ö –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ | Full ‚Üí Diff ‚Üí Logs |
| –¶–µ–ø–æ—á–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π | Backup chain | –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏–º—ã—Ö –∫–æ–ø–∏–π | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç LSN |
| LSN (–Ω–æ–º–µ—Ä –≤ –∂—É—Ä–Ω–∞–ª–µ) | Log Sequence Number | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ –≤ –∂—É—Ä–Ω–∞–ª–µ | –°–≤—è–∑—ã–≤–∞–µ—Ç –∫–æ–ø–∏–∏ |
| STOPAT | STOPAT | –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –¥–ª—è PITR | `STOPAT = '2026-03-01 14:35'` |
| Tail-log backup | Tail-log backup | –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Ö–≤–æ—Å—Ç–∞ –∂—É—Ä–Ω–∞–ª–∞ –ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º | `BACKUP LOG ... WITH NORECOVERY` |

---

## 1. üß† –§–∏–ª–æ—Å–æ—Ñ–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: –ø–æ—á–µ–º—É —ç—Ç–æ —Å–ª–æ–∂–Ω–µ–µ –±—ç–∫–∞–ø–∞?

–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –º–æ–∂–µ—Ç –∫–∞–∂–¥—ã–π. –ê –≤–æ—Ç **–ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å** ‚Äî —ç—Ç–æ –≤—ã—Å—à–∏–π –ø–∏–ª–æ—Ç–∞–∂ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

**–ü–æ—á–µ–º—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Å–ª–æ–∂–Ω–æ?**

1. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ü–µ–ø–æ—á–∫–∏** ‚Äî –Ω–µ–ª—å–∑—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–Ω–æ—Å—Ç–Ω—É—é –∫–æ–ø–∏—é –±–µ–∑ –ø–æ–ª–Ω–æ–π.
2. **–ü–æ—Ä—è–¥–æ–∫ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ** ‚Äî –∫–æ–ø–∏–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –≤ —Å—Ç—Ä–æ–≥–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
3. **–°–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑—ã** ‚Äî –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–æ–≥–¥–∞ –±–∞–∑–∞ –¥–æ—Å—Ç—É–ø–Ω–∞, –∞ –∫–æ–≥–¥–∞ –∂–¥—ë—Ç.
4. **–í—Ä–µ–º—è** ‚Äî –ø—Ä–∏ PITR –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å —Ç–æ—á–Ω—ã–π –º–æ–º–µ–Ω—Ç.
5. **–û—à–∏–±–∫–∏ –Ω–µ –ø—Ä–æ—â–∞—é—Ç** ‚Äî –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–∂–µ—Ç —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –¥–∞–Ω–Ω—ã–µ.

```mermaid
graph TD
    A[–°–±–æ–π] --> B[–û—Ü–µ–Ω–∫–∞ —Å–∏—Ç—É–∞—Ü–∏–∏]
    B --> C{–ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å?}
    C -->|–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö| D[–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–æ–≤]
    C -->|–ü–æ—Ç–µ—Ä—è –¥–∏—Å–∫–∞| E[–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤–æ–µ –∂–µ–ª–µ–∑–æ]
    C -->|–õ–æ–≥–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞| F[PITR –¥–æ –º–æ–º–µ–Ω—Ç–∞ –î–û –æ—à–∏–±–∫–∏]
    C -->|–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ| G[–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä]
```

---

## 2. üîÑ –°–æ—Å—Ç–æ—è–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: RECOVERY, NORECOVERY, STANDBY

### 2.1. –°–æ—Å—Ç–æ—è–Ω–∏–µ RECOVERY (–ø–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ)

```sql
RESTORE DATABASE AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Full.bak'
WITH RECOVERY;  -- –±–∞–∑–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ
```

- **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:** SQL Server –ø—Ä–∏–º–µ–Ω—è–µ—Ç –≤—Å–µ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ –∂—É—Ä–Ω–∞–ª–∞ –∏ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ.
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–∞–∑–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è **–ø–æ—Å–ª–µ–¥–Ω–µ–π** –∫–æ–ø–∏–∏ –≤ —Ü–µ–ø–æ—á–∫–µ.

### 2.2. –°–æ—Å—Ç–æ—è–Ω–∏–µ NORECOVERY (–æ–∂–∏–¥–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–ø–∏–π)

```sql
RESTORE DATABASE AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Full.bak'
WITH NORECOVERY;  -- –±–∞–∑–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è"
```

- **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:** –ë–∞–∑–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –Ω–æ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º. –û–∂–∏–¥–∞–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–ø–∏–π (—Ä–∞–∑–Ω–æ—Å—Ç–Ω—ã—Ö, –∂—É—Ä–Ω–∞–ª–æ–≤).
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–∞–∑–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `RESTORING`.
- **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ü–µ–ø–æ—á–∫–∏ (–ø–æ–ª–Ω–∞—è ‚Üí —Ä–∞–∑–Ω–æ—Å—Ç–Ω–∞—è ‚Üí –∂—É—Ä–Ω–∞–ª—ã), –∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —à–∞–≥–∞.

### 2.3. –°–æ—Å—Ç–æ—è–Ω–∏–µ STANDBY (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è–º–∏)

```sql
RESTORE DATABASE AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Full.bak'
WITH STANDBY = 'D:\Backup\undo_file.tuf';
```

- **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:** –ë–∞–∑–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è –º–µ–∂–¥—É –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è–º–∏ –∂—É—Ä–Ω–∞–ª–æ–≤. SQL Server —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –æ—Ç–∫–∞—Ç–∞ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª.
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —ç—Ç–∞–ø–∞—Ö –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
- **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–µ–ø–ª–∏–∫ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è –∏–ª–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.

### 2.4. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π

```mermaid
stateDiagram-v2
    [*] --> NORECOVERY: RESTORE WITH NORECOVERY
    NORECOVERY --> NORECOVERY: –°–ª–µ–¥—É—é—â–∞—è –∫–æ–ø–∏—è
    NORECOVERY --> RECOVERY: RESTORE WITH RECOVERY (–ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥)
    NORECOVERY --> STANDBY: RESTORE WITH STANDBY
    STANDBY --> NORECOVERY: –°–ª–µ–¥—É—é—â–∞—è –∫–æ–ø–∏—è
    STANDBY --> RECOVERY: –§–∏–Ω–∞–ª—å–Ω—ã–π —à–∞–≥
    RECOVERY --> [*]: –ë–∞–∑–∞ –≤ —Ä–∞–±–æ—Ç–µ
```

---

## 3. üìÄ –¢–∏–ø—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### 3.1. –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (Full Restore)

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –£ –Ω–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–∞—è –∫–æ–ø–∏—è, –Ω—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑—É —Ü–µ–ª–∏–∫–æ–º. –†–∞–∑–Ω–æ—Å—Ç–Ω—ã–µ –∏ –∂—É—Ä–Ω–∞–ª—ã –Ω–µ –Ω—É–∂–Ω—ã (–∏–ª–∏ –∏—Ö –Ω–µ—Ç).

```sql
RESTORE DATABASE AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Full.bak'
WITH REPLACE,  -- –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –±–∞–∑—É
     RECOVERY;  -- —Å—Ä–∞–∑—É —Å–¥–µ–ª–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ–π
```

**–í–∞–∂–Ω–æ:** –ü—Ä–∏ –ø–æ–ª–Ω–æ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ç–µ—Ä—è—é—Ç—Å—è –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å–¥–µ–ª–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ç–æ–π –∫–æ–ø–∏–∏.

**–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:**
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
- –ü–µ—Ä–µ–Ω–æ—Å –±–∞–∑—ã –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä
- –ï—Å–ª–∏ RPO –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ —Å—É—Ç–∫–∏

### 3.2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (Point-in-Time Recovery)

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –í 14:35 –∫—Ç–æ-—Ç–æ —Å–ª—É—á–∞–π–Ω–æ —É–¥–∞–ª–∏–ª –≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ù—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –±–∞–∑—É –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ 14:34:59.

```sql
-- –®–∞–≥ 1: –ü–æ–ª–Ω–∞—è –∫–æ–ø–∏—è (—Å NORECOVERY)
RESTORE DATABASE AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Full.bak'
WITH NORECOVERY,
     REPLACE;

-- –®–∞–≥ 2: –†–∞–∑–Ω–æ—Å—Ç–Ω–∞—è –∫–æ–ø–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
RESTORE DATABASE AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Diff.bak'
WITH NORECOVERY;

-- –®–∞–≥ 3: –ñ—É—Ä–Ω–∞–ª—ã –¥–æ –Ω—É–∂–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞
RESTORE LOG AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Log1.trn'
WITH NORECOVERY,
     STOPAT = '2026-03-01 14:34:59';

RESTORE LOG AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Log2.trn'
WITH RECOVERY,  -- –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥
     STOPAT = '2026-03-01 14:34:59';
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- `STOPAT` —É–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ—á–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏
- –í—Å–µ –∂—É—Ä–Ω–∞–ª—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- –ü–æ—Å–ª–µ–¥–Ω–∏–π –∂—É—Ä–Ω–∞–ª –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å `RECOVERY`

### 3.3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ —Ç–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞ (Restore to point of failure)

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –î–∏—Å–∫ —Å –¥–∞–Ω–Ω—ã–º–∏ –≤—ã—à–µ–ª –∏–∑ —Å—Ç—Ä–æ—è –≤ 15:23. –ù—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å **–≤—Å–µ** –¥–∞–Ω–Ω—ã–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–æ–∑–º–æ–∂–Ω–æ–π —Å–µ–∫—É–Ω–¥—ã.

```mermaid
graph LR
    A[–ü–æ–ª–Ω–∞—è –∫–æ–ø–∏—è<br/>02:00] --> B[–†–∞–∑–Ω–æ—Å—Ç–Ω–∞—è –∫–æ–ø–∏—è<br/>14:00]
    B --> C[–ñ—É—Ä–Ω–∞–ª 14:15]
    C --> D[–ñ—É—Ä–Ω–∞–ª 14:30]
    D --> E[–ñ—É—Ä–Ω–∞–ª 14:45]
    E --> F[–ñ—É—Ä–Ω–∞–ª 15:00]
    F --> G[–•–≤–æ—Å—Ç –∂—É—Ä–Ω–∞–ª–∞<br/>15:23 (–º–æ–º–µ–Ω—Ç —Å–±–æ—è)]
```

**–ü–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π:**

```sql
-- –®–∞–≥ 0: –°–Ω—è—Ç—å —Ö–≤–æ—Å—Ç –∂—É—Ä–Ω–∞–ª–∞ (–µ—Å–ª–∏ –∂—É—Ä–Ω–∞–ª –∂–∏–≤)
BACKUP LOG AdventureWorks
TO DISK = 'D:\Backup\AdventureWorks_Tail.trn'
WITH NORECOVERY;  -- –±–∞–∑–∞ –ø–µ—Ä–µ–π–¥—ë—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ RESTORING

-- –®–∞–≥ 1: –ü–æ–ª–Ω–∞—è –∫–æ–ø–∏—è
RESTORE DATABASE AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Full.bak'
WITH NORECOVERY;

-- –®–∞–≥ 2: –†–∞–∑–Ω–æ—Å—Ç–Ω–∞—è –∫–æ–ø–∏—è (–ø–æ—Å–ª–µ–¥–Ω—è—è)
RESTORE DATABASE AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Diff.bak'
WITH NORECOVERY;

-- –®–∞–≥ 3: –í—Å–µ –∂—É—Ä–Ω–∞–ª—ã –ø–æ—Å–ª–µ —Ä–∞–∑–Ω–æ—Å—Ç–Ω–æ–π
RESTORE LOG AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Log1.trn'
WITH NORECOVERY;

RESTORE LOG AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Log2.trn'
WITH NORECOVERY;

-- –®–∞–≥ 4: –•–≤–æ—Å—Ç –∂—É—Ä–Ω–∞–ª–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–π)
RESTORE LOG AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Tail.trn'
WITH RECOVERY;  -- –±–∞–∑–∞ –≥–æ—Ç–æ–≤–∞
```

---

## 4. üß© –¶–µ–ø–æ—á–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏ LSN

### 4.1. –ö–∞–∫ LSN —Å–≤—è–∑—ã–≤–∞—é—Ç –∫–æ–ø–∏–∏

–ö–∞–∂–¥–∞—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ LSN:

- **FirstLSN** ‚Äî –ø–µ—Ä–≤–∞—è –∑–∞–ø–∏—Å—å –≤ –∫–æ–ø–∏–∏
- **LastLSN** ‚Äî –ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å –≤ –∫–æ–ø–∏–∏
- **DatabaseBackupLSN** ‚Äî LSN –ø–æ–ª–Ω–æ–π –∫–æ–ø–∏–∏, –∫ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Ä–∞–∑–Ω–æ—Å—Ç–Ω–∞—è
- **CheckpointLSN** ‚Äî –ø–æ—Å–ª–µ–¥–Ω—è—è –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Ç–æ—á–∫–∞

```sql
-- –ü—Ä–æ—Å–º–æ—Ç—Ä LSN –≤ –∫–æ–ø–∏—è—Ö
RESTORE HEADERONLY FROM DISK = 'D:\Backup\AdventureWorks_Full.bak';
RESTORE HEADERONLY FROM DISK = 'D:\Backup\AdventureWorks_Diff.bak';
RESTORE HEADERONLY FROM DISK = 'D:\Backup\AdventureWorks_Log1.trn';
```

### 4.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —Ü–µ–ø–æ—á–∫–∏

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ä–∞–∑–Ω–æ—Å—Ç–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å –ø–æ–ª–Ω–æ–π
RESTORE VERIFYONLY 
FROM DISK = 'D:\Backup\AdventureWorks_Diff.bak'
WITH FILE = 1,
     STOPAT = '2026-03-01 15:00';  -- –ø—Ä–æ–≤–µ—Ä–∏—Ç, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –∂—É—Ä–Ω–∞–ª–æ–≤
```

---

## 5. üõ†Ô∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### 5.1. –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–ª—É—á–∞–π–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã

**–°–∏—Ç—É–∞—Ü–∏—è:** –í 10:30 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–ø–æ–ª–Ω–∏–ª `DROP TABLE dbo.Orders`. –ù—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑—É –Ω–∞ –º–æ–º–µ–Ω—Ç 10:29.

**–†–µ—à–µ–Ω–∏–µ:**
1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª–Ω—É—é –∫–æ–ø–∏—é –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∂—É—Ä–Ω–∞–ª—ã –¥–æ 10:29
3. –í—ã–≥—Ä—É–∑–∏—Ç—å —É–¥–∞–ª—ë–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω—É—é –ë–î

```sql
-- –ù–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ
RESTORE DATABASE AdventureWorks_Test
FROM DISK = 'D:\Backup\AdventureWorks_Full.bak'
WITH NORECOVERY,
     MOVE 'AdventureWorks' TO 'D:\Data\Test\AW.mdf',
     MOVE 'AdventureWorks_log' TO 'D:\Data\Test\AW.ldf';

RESTORE LOG AdventureWorks_Test
FROM DISK = 'D:\Backup\AdventureWorks_Log1.trn'
WITH NORECOVERY,
     STOPAT = '2026-03-02 10:29';

RESTORE LOG AdventureWorks_Test
FROM DISK = 'D:\Backup\AdventureWorks_Log2.trn'
WITH RECOVERY,
     STOPAT = '2026-03-02 10:29';

-- –ó–∞—Ç–µ–º —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
SELECT * INTO TempOrders
FROM AdventureWorks_Test.dbo.Orders;

-- –ò –∏–º–ø–æ—Ä—Ç –≤ –æ—Å–Ω–æ–≤–Ω—É—é –ë–î
INSERT INTO Production.dbo.Orders
SELECT * FROM TempOrders;
```

### 5.2. –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞–∑ —Å–µ—Ä–≤–µ—Ä–∞

**–°–∏—Ç—É–∞—Ü–∏—è:** –°–µ—Ä–≤–µ—Ä —Å–≥–æ—Ä–µ–ª. –ï—Å—Ç—å –±—ç–∫–∞–ø—ã –Ω–∞ —Å–µ—Ç–µ–≤–æ–º —Ä–µ—Å—É—Ä—Å–µ. –ù—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë –Ω–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ.

**–†–µ—à–µ–Ω–∏–µ:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SQL Server
2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –±–∞–∑—ã (master, msdb) –∏–∑ –±—ç–∫–∞–ø–æ–≤
3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –±–∞–∑—ã

```sql
-- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ master (—á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É)
-- sqlservr.exe -m -c -T3608

-- –ó–∞—Ç–µ–º –≤ –æ–¥–Ω–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º —Ä–µ–∂–∏–º–µ:
RESTORE DATABASE master
FROM DISK = '\\network\backup\master.bak'
WITH REPLACE;
```

### 5.3. –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∞–Ω–Ω—ã—Ö

**–°–∏—Ç—É–∞—Ü–∏—è:** `DBCC CHECKDB` –æ–±–Ω–∞—Ä—É–∂–∏–ª –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ –±—ç–∫–∞–ø–∞.

```sql
-- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (SQL Server 2016+)
RESTORE DATABASE AdventureWorks
PAGE = '1:123, 1:456'  -- —Ñ–∞–π–ª:—Å—Ç—Ä–∞–Ω–∏—Ü–∞
FROM DISK = 'D:\Backup\AdventureWorks_Full.bak'
WITH NORECOVERY;

-- –ó–∞—Ç–µ–º –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∂—É—Ä–Ω–∞–ª—ã –¥–ª—è —ç—Ç–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
RESTORE LOG AdventureWorks
FROM DISK = 'D:\Backup\AdventureWorks_Log1.trn'
WITH RECOVERY;
```

---

## 6. üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### 6.1. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π

```sql
-- –ê–∫—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
SELECT 
    session_id,
    command,
    percent_complete,
    estimated_completion_time,
    start_time
FROM sys.dm_exec_requests
WHERE command LIKE '%RESTORE%';
```

### 6.2. –ò—Å—Ç–æ—Ä–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π

```sql
-- –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (–∏–∑ —É–º–æ–ª—á–∞–Ω–∏–π)
SELECT 
    destination_database_name,
    restore_date,
    restore_type,
    user_name,
    replace
FROM msdb.dbo.restorehistory
ORDER BY restore_date DESC;
```

### 6.3. –û—à–∏–±–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

```sql
-- –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫ –≤ –∂—É—Ä–Ω–∞–ª–µ SQL Server
EXEC xp_readerrorlog 0, 1, 'RESTORE', 'error';
```

---

## 7. üö® –¢–∏–ø–æ–≤—ã–µ –æ—à–∏–±–∫–∏ –∏ –∫–∞–∫ –∏—Ö –∏–∑–±–µ–∂–∞—Ç—å

### 7.1. –û—à–∏–±–∫–∞: "The backup set holds a backup of a database other than..."

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—ã—Ç–∞–µ–º—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–ø–∏—é –∏–∑ –¥—Ä—É–≥–æ–π –±–∞–∑—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `WITH REPLACE`.

### 7.2. –û—à–∏–±–∫–∞: "The log in this backup set begins at LSN... which is too late"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–∞—Ä—É—à–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–æ–≤ (–ø—Ä–æ–ø—É—â–µ–Ω –∂—É—Ä–Ω–∞–ª).

**–†–µ—à–µ–Ω–∏–µ:** –ù–∞–π—Ç–∏ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–π –∂—É—Ä–Ω–∞–ª –∏–ª–∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ —Å –ø–æ–ª–Ω–æ–π –∫–æ–ø–∏–∏.

### 7.3. –û—à–∏–±–∫–∞: "STOPAT time is earlier than last applied log"

**–ü—Ä–∏—á–∏–Ω–∞:** –£–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è —Ä–∞–Ω—å—à–µ —É–∂–µ –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã—Ö –∂—É—Ä–Ω–∞–ª–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.

### 7.4. –û—à–∏–±–∫–∞: –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–µ—Å—Ç–∞

**–ü—Ä–∏—á–∏–Ω–∞:** –¶–µ–ª–µ–≤–æ–π –¥–∏—Å–∫ –º–µ–Ω—å—à–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `MOVE` –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ —Ñ–∞–π–ª–æ–≤.

```sql
RESTORE DATABASE AdventureWorks
FROM DISK = 'D:\Backup\AW.bak'
WITH 
    MOVE 'AdventureWorks' TO 'E:\Data\AW.mdf',
    MOVE 'AdventureWorks_log' TO 'F:\Logs\AW.ldf';
```

---

## 8. ‚úÖ –†–µ–∑—é–º–µ: —á–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º

- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å **–ø—Ä–∏—á–∏–Ω—É** —Å–±–æ—è (–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –æ—Ç–∫–∞–∑ –∂–µ–ª–µ–∑–∞)
- [ ] –í—ã–±—Ä–∞—Ç—å **—Ç–∏–ø –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è** (–ø–æ–ª–Ω–æ–µ, PITR, –¥–æ –æ—Ç–∫–∞–∑–∞)
- [ ] –ù–∞–π—Ç–∏ **–≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–ø–∏–∏** (–ø–æ–ª–Ω–∞—è, —Ä–∞–∑–Ω–æ—Å—Ç–Ω—ã–µ, –∂—É—Ä–Ω–∞–ª—ã)
- [ ] –°–Ω—è—Ç—å **—Ö–≤–æ—Å—Ç –∂—É—Ä–Ω–∞–ª–∞** (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å **—Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∫–æ–ø–∏–π** (`RESTORE VERIFYONLY`)
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å **–ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è** (–ø–æ –¥–∞—Ç–∞–º –∏ LSN)
- [ ] –í—ã–±—Ä–∞—Ç—å **—Ü–µ–ª–µ–≤–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ** —Ñ–∞–π–ª–æ–≤ (`MOVE`)
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–ø–∏–∏ —Å **NORECOVERY**, –∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π
- [ ] –ü–æ—Å–ª–µ–¥–Ω—é—é –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å **RECOVERY**
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å **—Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å** –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –ë–î (`DBCC CHECKDB`)
- [ ] –°–¥–µ–ª–∞—Ç—å **–Ω–æ–≤—ã–π –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø** –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

üîë **–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:**  
> *¬´–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –±–∞–∑—É "–ø–æ–≤–µ—Ä—Ö" —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –±–µ–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –°–Ω–∞—á–∞–ª–∞ —Å–Ω–∏–º–∞–π—Ç–µ —Ö–≤–æ—Å—Ç –∂—É—Ä–Ω–∞–ª–∞!¬ª*

---

## 9. ‚ùì –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏

1. –í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É `WITH RECOVERY` –∏ `WITH NORECOVERY`?
2. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ `STANDBY`?
3. –ß—Ç–æ —Ç–∞–∫–æ–µ PITR –∏ –∫–∞–∫–∏–µ —É—Å–ª–æ–≤–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è?
4. –ü–æ—á–µ–º—É –ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –≤–∞–∂–Ω–æ —Å–Ω—è—Ç—å —Ö–≤–æ—Å—Ç –∂—É—Ä–Ω–∞–ª–∞?
5. –ö–∞–∫ LSN –ø–æ–º–æ–≥–∞—é—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è?
6. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–∞–∑–Ω–æ—Å—Ç–Ω—É—é –∫–æ–ø–∏—é –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π?
7. –ö–∞–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑—É –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä —Å –¥—Ä—É–≥–∏–º–∏ –ø—É—Ç—è–º–∏ –∫ —Ñ–∞–π–ª–∞–º?
8. –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—à–∏–±–∫–∞ "The backup set holds a backup of a database other than..."?
9. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–π–¥—ë—Ç —É—Å–ø–µ—à–Ω–æ, –¥–æ –µ–≥–æ –Ω–∞—á–∞–ª–∞?
10. –ú–æ–∂–Ω–æ –ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –±–µ–∑ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ–π –±–∞–∑—ã?
11. –ö–∞–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑—É –Ω–∞ –º–æ–º–µ–Ω—Ç "–∑–∞ 5 –º–∏–Ω—É—Ç –¥–æ DROP TABLE"?
12. –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –∂—É—Ä–Ω–∞–ª–æ–≤ –≤ —Ü–µ–ø–æ—á–∫–µ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω?
13. –ö–∞–∫ –¥–æ–ª–≥–æ –±–∞–∑–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ NORECOVERY? –ï—Å—Ç—å –ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è?
14. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?
15. –ü–æ—á–µ–º—É –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø?

---

## üìé –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º RESTORE

```sql
-- –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –∑–∞–º–µ–Ω–æ–π
RESTORE DATABASE DB FROM DISK = 'path' WITH REPLACE, RECOVERY;

-- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ–º —Ñ–∞–π–ª–æ–≤
RESTORE DATABASE DB FROM DISK = 'path' 
WITH MOVE 'logical_name' TO 'physical_path', RECOVERY;

-- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å PITR
RESTORE LOG DB FROM DISK = 'path' 
WITH STOPAT = '2026-03-01 14:35:00', RECOVERY;

-- –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∫–æ–ø–∏–∏
RESTORE HEADERONLY FROM DISK = 'path';

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
RESTORE VERIFYONLY FROM DISK = 'path';

-- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
RESTORE DATABASE DB PAGE = '1:123, 1:456' FROM DISK = 'path';

-- –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ–ø–∏–∏
RESTORE FILELISTONLY FROM DISK = 'path';
```


üìú **–õ–∏—Ü–µ–Ω–∑–∏—è:** CC BY-NC-SA 4.0  
üë®‚Äçüè´ **–ê–≤—Ç–æ—Ä:** –†—É—Å–ª–∞–Ω –†–∏–Ω–∞—Ç–æ–≤–∏—á –°–∞—Ñ–∏—É–ª–∏–Ω  
üìÖ **–î–∞—Ç–∞:** 28.02.2026

# üîô üìö üîú –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫—É—Ä—Å—É

| [–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/PR17.MD) | &nbsp; | [–°–ª–µ–¥—É—é—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/PR18.MD) |
|:--------------------------------------:|:------:|:-------------------------------------:|
| üè† [–ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ17](../LESSONS/PR17.MD) | üìñ [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](../README.MD) | üíª [–ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ18](../LESSONS/PR18.MD) |
