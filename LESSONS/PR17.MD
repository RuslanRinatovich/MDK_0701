üîô üìö üîú –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫—É—Ä—Å—É  
| [–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/LESSON17.MD) | &nbsp; | [–°–ª–µ–¥—É—é—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/LESSON18.MD) |
|:--------------------------------------:|:------:|:-------------------------------------:|
| üè† [–õ–µ–∫—Ü–∏—è ‚Ññ17](../LESSONS/LESSON17.MD) | üìñ [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](../README.MD) | üíª [–õ–µ–∫—Ü–∏—è ‚Ññ18](../LESSONS/LESSON18.MD) |

---
# üß™ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ17  
## –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –µ–≥–æ —Ä–∞–∑–º–µ—Ä–æ–º

‚è±Ô∏è **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 90 –º–∏–Ω—É—Ç  
üéØ **–¶–µ–ª—å —Ä–∞–±–æ—Ç—ã:**  
–ù–∞—É—á–∏—Ç—å—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –∂—É—Ä–Ω–∞–ª–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–ª–∏—è–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –±—ç–∫–∞–ø–æ–≤ –Ω–∞ —Ä–∞–∑–º–µ—Ä –∂—É—Ä–Ω–∞–ª–∞, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —É—Å–µ—á–µ–Ω–∏–µ–º –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º —Ä–∞–∑–º–µ—Ä–æ–º —Ñ–∞–π–ª–∞ `.ldf`. –û—Å–≤–æ–∏—Ç—å –º–µ—Ç–æ–¥—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–∫–∏ 9002.

üñ•Ô∏è **–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:**  
–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ —Å Windows Server / Windows 10, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ SQL Server Developer Edition –∏ SSMS.

---

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è  

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | 90 –º–∏–Ω—É—Ç |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞–Ω–∏–π | 6 |
---

## üß† –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ: –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

- –í—Å–ø–æ–º–Ω–∏—Ç–µ, –∫–∞–∫ –º–æ–¥–µ–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤–ª–∏—è—é—Ç –Ω–∞ —É—Å–µ—á–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞.
- –ü–æ–¥—É–º–∞–π—Ç–µ, –ø–æ—á–µ–º—É –≤ FULL –º–æ–¥–µ–ª–∏ –∂—É—Ä–Ω–∞–ª —Ä–∞—Å—Ç—ë—Ç, –¥–∞–∂–µ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –º–µ–Ω—è—é—Ç—Å—è.
- –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç —Å –∂—É—Ä–Ω–∞–ª–æ–º, –µ—Å–ª–∏ –¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø—ã –ª–æ–≥–∞ —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏ –ø—Ä–∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö?

---

## üìã –•–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã

### üîπ –≠—Ç–∞–ø 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ä–µ–¥—ã (15 –º–∏–Ω)

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ **SSMS** –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —ç–∫–∑–µ–º–ø–ª—è—Ä—É SQL Server.

2. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º:

```sql
CREATE DATABASE LogManagement_–§–∞–º–∏–ª–∏—è;
GO
USE LogManagement_–§–∞–º–∏–ª–∏—è;
GO
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –∏ –Ω–∞–ø–æ–ª–Ω–∏—Ç–µ –µ—ë –¥–∞–Ω–Ω—ã–º–∏ (–æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–æ–∫–∏):

```sql
CREATE TABLE dbo.TestLog (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    BigData CHAR(3000) DEFAULT 'A',
    Created DATETIME DEFAULT GETDATE()
);
GO

-- –í—Å—Ç–∞–≤–∏–º 5000 —Å—Ç—Ä–æ–∫, —á—Ç–æ–±—ã –∂—É—Ä–Ω–∞–ª –≤—ã—Ä–æ—Å
INSERT INTO dbo.TestLog DEFAULT VALUES;
GO 5000
```

4. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `C:\Backup\–ü–†17\` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±—ç–∫–∞–ø–æ–≤.

5. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è FULL:**

```sql
ALTER DATABASE LogManagement_–§–∞–º–∏–ª–∏—è SET RECOVERY FULL;
GO
```

6. –ó–∞–ø–∏—à–∏—Ç–µ **–Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∂—É—Ä–Ω–∞–ª–∞**:

```sql
SELECT 
    name,
    size * 8 / 1024 AS SizeMB
FROM sys.database_files
WHERE type_desc = 'LOG';
```

---

### üîπ –≠—Ç–∞–ø 2. –ü–æ–ª–Ω–∞—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è (10 –º–∏–Ω)

–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª–Ω—É—é –∫–æ–ø–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–Ω–æ–π —Ç–æ—á–∫–æ–π:

```sql
BACKUP DATABASE [LogManagement_–§–∞–º–∏–ª–∏—è]
TO DISK = N'C:\Backup\–ü–†17\LogManagement_–§–∞–º–∏–ª–∏—è_Full.bak'
WITH INIT, COMPRESSION, CHECKSUM, STATS = 10;
```

**–°–∫—Ä–∏–Ω—à–æ—Ç** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

### üîπ –≠—Ç–∞–ø 3. –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Ç–µ—Å—Ç –±–µ–∑ –±—ç–∫–∞–ø–æ–≤ –∂—É—Ä–Ω–∞–ª–∞ (20 –º–∏–Ω)

1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∞—Å—Å–æ–≤—É—é –≤—Å—Ç–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö **–±–µ–∑ –±—ç–∫–∞–ø–æ–≤ –∂—É—Ä–Ω–∞–ª–∞**:

```sql
-- –í—Å—Ç–∞–≤–∏–º –µ—â—ë 10000 —Å—Ç—Ä–æ–∫
INSERT INTO dbo.TestLog DEFAULT VALUES;
GO 10000
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞:**

```sql
DBCC SQLPERF(LOGSPACE);
-- –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ—é –±–∞–∑—É, –∑–∞–ø–∏—à–∏—Ç–µ Log Size (MB) –∏ Log Space Used (%)
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø–æ—á–µ–º—É –∂—É—Ä–Ω–∞–ª –Ω–µ —É—Å–µ–∫–∞–µ—Ç—Å—è:**

```sql
SELECT name, log_reuse_wait_desc 
FROM sys.databases 
WHERE name = DB_NAME();
```

**–í–æ–ø—Ä–æ—Å:** –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `log_reuse_wait_desc`? –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç: `LOG_BACKUP` (–∂–¥—ë—Ç –±—ç–∫–∞–ø–∞ –∂—É—Ä–Ω–∞–ª–∞).

4. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É VLF:**

```sql
DBCC LOGINFO;
```
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å—Ç–æ–ª–±–µ—Ü `Status` (0 ‚Äî —Å–≤–æ–±–æ–¥–µ–Ω, 2 ‚Äî –∞–∫—Ç–∏–≤–µ–Ω).

5. **–°–∫—Ä–∏–Ω—à–æ—Ç—ã** –≤—Å–µ—Ö —Ç—Ä—ë—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

---

### üîπ –≠—Ç–∞–ø 4. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞ (15 –º–∏–Ω)

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –∂—É—Ä–Ω–∞–ª–∞:

```sql
BACKUP LOG [LogManagement_–§–∞–º–∏–ª–∏—è]
TO DISK = N'C:\Backup\–ü–†17\LogManagement_–§–∞–º–∏–ª–∏—è_Log1.trn'
WITH NAME = N'–ü–µ—Ä–≤—ã–π –±—ç–∫–∞–ø –∂—É—Ä–Ω–∞–ª–∞', COMPRESSION, CHECKSUM, STATS = 10;
```

2. **–°–Ω–æ–≤–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `DBCC SQLPERF(LOGSPACE);`**  
   –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ, –∫–∞–∫ –∏–∑–º–µ–Ω–∏–ª—Å—è –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–¥–æ–ª–∂–µ–Ω —É–ø–∞—Å—Ç—å).

3. **–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –≤—Å—Ç–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –∏ –±—ç–∫–∞–ø –∂—É—Ä–Ω–∞–ª–∞ –µ—â—ë 2 —Ä–∞–∑–∞:**

```sql
INSERT INTO dbo.TestLog DEFAULT VALUES;
GO 5000

BACKUP LOG [LogManagement_–§–∞–º–∏–ª–∏—è]
TO DISK = N'C:\Backup\–ü–†17\LogManagement_–§–∞–º–∏–ª–∏—è_Log2.trn'
WITH NAME = N'–í—Ç–æ—Ä–æ–π –±—ç–∫–∞–ø –∂—É—Ä–Ω–∞–ª–∞';

-- –ï—â—ë –≤—Å—Ç–∞–≤–∫–∞
INSERT INTO dbo.TestLog DEFAULT VALUES;
GO 5000

BACKUP LOG [LogManagement_–§–∞–º–∏–ª–∏—è]
TO DISK = N'C:\Backup\–ü–†17\LogManagement_–§–∞–º–∏–ª–∏—è_Log3.trn'
WITH NAME = N'–¢—Ä–µ—Ç–∏–π –±—ç–∫–∞–ø –∂—É—Ä–Ω–∞–ª–∞';
```

4. **–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –±—ç–∫–∞–ø–∞ —Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ —Ä–∞–∑–º–µ—Ä –∏ –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ.**

5. **–°–∫—Ä–∏–Ω—à–æ—Ç—ã** –∫–æ–º–∞–Ω–¥ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ `DBCC SQLPERF`.

---

### üîπ –≠—Ç–∞–ø 5. –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –∏ —Å–∂–∞—Ç–∏–µ (20 –º–∏–Ω)

1. **–ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–±—ã—Ç—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é** (–Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º –µ—ë!):

```sql
BEGIN TRAN;
INSERT INTO dbo.TestLog DEFAULT VALUES;
GO 1000
-- –ù–ï –¥–µ–ª–∞–µ–º COMMIT –∏–ª–∏ ROLLBACK!
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `log_reuse_wait_desc`** ‚Äî –¥–æ–ª–∂–Ω–æ —Å—Ç–∞—Ç—å `ACTIVE_TRANSACTION`.

3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø –∂—É—Ä–Ω–∞–ª–∞** (–æ–Ω –Ω–µ –¥–æ–ª–∂–µ–Ω —É—Å–µ—á—å –∞–∫—Ç–∏–≤–Ω—É—é —á–∞—Å—Ç—å):

```sql
BACKUP LOG [LogManagement_–§–∞–º–∏–ª–∏—è]
TO DISK = N'C:\Backup\–ü–†17\LogManagement_–§–∞–º–∏–ª–∏—è_Log4.trn';
```

4. **–ó–∞–≤–µ—Ä—à–∏—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é:**

```sql
COMMIT TRAN;
```

5. **–°–¥–µ–ª–∞–π—Ç–µ –µ—â—ë –æ–¥–∏–Ω –±—ç–∫–∞–ø –∂—É—Ä–Ω–∞–ª–∞** (—Ç–µ–ø–µ—Ä—å —É—Å–µ—á–µ–Ω–∏–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç).

6. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–º–µ–Ω—å—à–∏—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ñ–∞–π–ª –∂—É—Ä–Ω–∞–ª–∞:**

```sql
-- –£–∑–Ω–∞–π—Ç–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏–º—è —Ñ–∞–π–ª–∞ –∂—É—Ä–Ω–∞–ª–∞
SELECT name FROM sys.database_files WHERE type_desc = 'LOG';

-- –£–º–µ–Ω—å—à–∏—Ç–µ –¥–æ —Ä–∞–∑—É–º–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 200 –ú–ë)
DBCC SHRINKFILE (N'LogManagement_–§–∞–º–∏–ª–∏—è_log', 200);
```

7. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä** —á–µ—Ä–µ–∑ `sys.database_files`.

8. **–°–∫—Ä–∏–Ω—à–æ—Ç—ã** –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤.

---

### üîπ –≠—Ç–∞–ø 6. –ê–Ω–∞–ª–∏–∑ –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å (10 –º–∏–Ω)

1. **–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –±—ç–∫–∞–ø–æ–≤ –∂—É—Ä–Ω–∞–ª–∞:**

```sql
SELECT 
    bs.database_name,
    bs.backup_start_date,
    bs.backup_finish_date,
    bs.backup_size/1048576 AS SizeMB,
    bs.compressed_backup_size/1048576 AS CompressedSizeMB,
    bs.first_lsn,
    bs.last_lsn,
    bs.name AS BackupName,
    bmf.physical_device_name
FROM msdb.dbo.backupset bs
JOIN msdb.dbo.backupmediafamily bmf 
    ON bs.media_set_id = bmf.media_set_id
WHERE bs.database_name = 'LogManagement_–§–∞–º–∏–ª–∏—è'
    AND bs.type = 'L'  -- —Ç–æ–ª—å–∫–æ –∂—É—Ä–Ω–∞–ª—ã
ORDER BY bs.backup_start_date;
```

2. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ü–µ–ø–æ—á–∫—É LSN** ‚Äî –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏.

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞:**

```sql
SELECT 
    name,
    log_reuse_wait_desc,
    recovery_model_desc
FROM sys.databases
WHERE name = DB_NAME();
```

4. **–°–∫—Ä–∏–Ω—à–æ—Ç—ã** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π

| –î–µ–π—Å—Ç–≤–∏–µ | –†–∞–∑–º–µ—Ä –∂—É—Ä–Ω–∞–ª–∞ (–ú–ë) | % –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | log_reuse_wait_desc | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö VLF |
|----------|---------------------|-----------------|---------------------|------------------------|
| –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ë–î | | | | |
| –ü–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞ | | | | |
| –ü–æ—Å–ª–µ –≤—Å—Ç–∞–≤–∫–∏ 10000 —Å—Ç—Ä–æ–∫ | | | | |
| –ü–æ—Å–ª–µ –±—ç–∫–∞–ø–∞ –ª–æ–≥–∞ #1 | | | | |
| –ü–æ—Å–ª–µ –±—ç–∫–∞–ø–∞ –ª–æ–≥–∞ #2 | | | | |
| –ü–æ—Å–ª–µ –±—ç–∫–∞–ø–∞ –ª–æ–≥–∞ #3 | | | | |
| –í–æ –≤—Ä–µ–º—è –æ—Ç–∫—Ä—ã—Ç–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ | | | | |
| –ü–æ—Å–ª–µ COMMIT –∏ –±—ç–∫–∞–ø–∞ | | | | |
| –ü–æ—Å–ª–µ SHRINKFILE | | | | |

---

## ‚ùì –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

1. –ü–æ—á–µ–º—É –≤ –º–æ–¥–µ–ª–∏ FULL –∂—É—Ä–Ω–∞–ª –Ω–µ —É—Å–µ–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏?
2. –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `log_reuse_wait_desc` –∏ –∫–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—ã –Ω–∞–±–ª—é–¥–∞–ª–∏ –≤ —Ö–æ–¥–µ —Ä–∞–±–æ—Ç—ã?
3. –ö–∞–∫ —á–∞—Å—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø—ã –∂—É—Ä–Ω–∞–ª–∞, —á—Ç–æ–±—ã –∂—É—Ä–Ω–∞–ª –Ω–µ —Ä–æ—Å –±–µ—Å–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ?
4. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –≤ FULL –º–æ–¥–µ–ª–∏ –¥–∏—Å–∫ —Å –∂—É—Ä–Ω–∞–ª–æ–º –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è –Ω–∞ 100%?
5. –ö–∞–∫ –æ—Ç–∫—Ä—ã—Ç–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤–ª–∏—è–µ—Ç –Ω–∞ —É—Å–µ—á–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞?
6. –ü–æ—á–µ–º—É –ø–æ—Å–ª–µ `BACKUP LOG` –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–¥–∞–µ—Ç, –∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º?
7. –ß—Ç–æ —Ç–∞–∫–æ–µ VLF –∏ –∫–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ?
8. –í –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –æ–ø—Ä–∞–≤–¥–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `DBCC SHRINKFILE` –¥–ª—è –∂—É—Ä–Ω–∞–ª–∞?
9. –ö–∞–∫–∏–µ —Ä–∏—Å–∫–∏ —Å–≤—è–∑–∞–Ω—ã —Å —á–∞—Å—Ç—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `SHRINKFILE`?
10. –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –∂—É—Ä–Ω–∞–ª –∑–∞–ø–æ–ª–Ω–µ–Ω –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 80%?
11. –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —É—Å–µ—á–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞ –æ—Ç –µ–≥–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —É–º–µ–Ω—å—à–µ–Ω–∏—è?
12. –ü–æ—á–µ–º—É –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ –∞–≤—Ç–æ—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –∂—É—Ä–Ω–∞–ª–∞?

---

## üìù –í—ã–≤–æ–¥

–í –≤—ã–≤–æ–¥–µ –æ—Ç—Ä–∞–∑–∏—Ç–µ:
- –ß—Ç–æ –Ω–æ–≤–æ–≥–æ —É–∑–Ω–∞–ª–∏ –æ –∂—É—Ä–Ω–∞–ª–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π?
- –ö–∞–∫ —á–∞—Å—Ç–æ—Ç–∞ –±—ç–∫–∞–ø–æ–≤ –ª–æ–≥–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –µ–≥–æ —Ä–∞–∑–º–µ—Ä?
- –ö–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ–∫–∞–∑–∞–ª–∏—Å—å –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ª–µ–∑–Ω—ã–º–∏?
- –° –∫–∞–∫–∏–º–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏ —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å –∏ –∫–∞–∫ –∏—Ö –ø—Ä–µ–æ–¥–æ–ª–µ–ª–∏?
- –ö–∞–∫ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –∂—É—Ä–Ω–∞–ª–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ?

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é –æ—Ç—á—ë—Ç–∞

**–§–∞–π–ª:** `–û—Ç—á—ë—Ç_–§–∞–º–∏–ª–∏—è_–ì—Ä—É–ø–ø–∞_–ü–†17.docx`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
1. –¢–∏—Ç—É–ª—å–Ω—ã–π –ª–∏—Å—Ç.
2. –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã.
3. –•–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—ç—Ç–∞–ø—ã 1‚Äì6) —Å **—Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º–∏**:
   - –≠—Ç–∞–ø 1: —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
   - –≠—Ç–∞–ø 2: –ø–æ–ª–Ω–∞—è –∫–æ–ø–∏—è
   - –≠—Ç–∞–ø 3: `DBCC SQLPERF` –∏ `log_reuse_wait_desc`
   - –≠—Ç–∞–ø 4: –∫–æ–º–∞–Ω–¥—ã `BACKUP LOG` –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã `DBCC SQLPERF`
   - –≠—Ç–∞–ø 5: –æ—Ç–∫—Ä—ã—Ç–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è, `log_reuse_wait_desc`, `SHRINKFILE`
   - –≠—Ç–∞–ø 6: –∑–∞–ø—Ä–æ—Å—ã –∫ msdb –∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
4. –¢–∞–±–ª–∏—Ü–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π.
5. –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.
6. –í—ã–≤–æ–¥.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º:**
- –í–∏–¥–µ–Ω —Ç–µ–∫—Å—Ç –∫–æ–º–∞–Ω–¥—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
- –í –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ–∫–Ω–∞ ‚Äì –∏–º—è –±–∞–∑—ã.
- –ü–æ–¥–ø–∏—Å—å –ø–æ–¥ –∫–∞–∂–¥—ã–º —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–º.

---

## üìä –ö—Ä–∞—Ç–∫–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è

| –ö—Ä–∏—Ç–µ—Ä–∏–π | ¬´5¬ª (–æ—Ç–ª–∏—á–Ω–æ) | ¬´4¬ª (—Ö–æ—Ä–æ—à–æ) | ¬´3¬ª (—É–¥–æ–≤–ª.) |
|----------|----------------|---------------|---------------|
| **–°—Ç–∞—Ä—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç** | –ë–î —Å —Ñ–∞–º–∏–ª–∏–µ–π, —Ç–∞–±–ª–∏—Ü—ã, FULL –º–æ–¥–µ–ª—å | –ë–î —Å–æ–∑–¥–∞–Ω–∞, –º–µ–ª–∫–∏–µ –Ω–µ–¥–æ—á—ë—Ç—ã | –û—à–∏–±–∫–∏ –∏–ª–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω |
| **–≠—Ç–∞–ø 2 (–ø–æ–ª–Ω–∞—è –∫–æ–ø–∏—è)** | –° –æ–ø—Ü–∏—è–º–∏, —Å–∫—Ä–∏–Ω—à–æ—Ç | –ö–æ–ø–∏—è –µ—Å—Ç—å, –Ω–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ | –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ |
| **–≠—Ç–∞–ø 3 (–Ω–∞–≥—Ä—É–∑–∫–∞ –±–µ–∑ –±—ç–∫–∞–ø–æ–≤)** | –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω —Ä–æ—Å—Ç, –∞–Ω–∞–ª–∏–∑ log_reuse_wait | –î–∞–Ω–Ω—ã–µ –≤—Å—Ç–∞–≤–ª–µ–Ω—ã, –Ω–µ—Ç –∞–Ω–∞–ª–∏–∑–∞ | –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ |
| **–≠—Ç–∞–ø 4 (–±—ç–∫–∞–ø—ã –ª–æ–≥–∞)** | 3 –±—ç–∫–∞–ø–∞, –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ —É—Å–µ—á–µ–Ω–∏–µ, —Å–∫—Ä–∏–Ω—à–æ—Ç—ã | –ë—ç–∫–∞–ø—ã –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç –¥–∏–Ω–∞–º–∏–∫–∏ | –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ |
| **–≠—Ç–∞–ø 5 (–∞–≤–∞—Ä–∏—è + SHRINKFILE)** | –û—Ç–∫—Ä—ã—Ç–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è, –∞–Ω–∞–ª–∏–∑, —Å–∂–∞—Ç–∏–µ | –ß–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ | –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ |
| **–≠—Ç–∞–ø 6 (–∞–Ω–∞–ª–∏–∑ msdb)** | –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ LSN –∏ –∏—Å—Ç–æ—Ä–∏–∏ | –ó–∞–ø—Ä–æ—Å –µ—Å—Ç—å, –∞–Ω–∞–ª–∏–∑ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω—ã–π | –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ |
| **–¢–∞–±–ª–∏—Ü–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π** | –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ | 1-2 –ø—Ä–æ–ø—É—Å–∫–∞ | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç |
| **–û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã** | –ü–æ–ª–Ω—ã–µ, —Å —Ç–µ—Ä–º–∏–Ω–∞–º–∏ | 2-3 –Ω–µ–ø–æ–ª–Ω—ã—Ö | –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –Ω–µ—Ç |
| **–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –æ—Ç—á—ë—Ç–∞** | –°—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø–æ–¥–ø–∏—Å–∏, –≤—ã–≤–æ–¥ | –ú–µ–ª–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è | –ù–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω |

**–®—Ç—Ä–∞—Ñ—ã:** -1 –∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤, -0.5 –∑–∞ –Ω–µ—á–∏—Ç–∞–µ–º—ã–µ, -1 –∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—ã–≤–æ–¥–∞  
‚ùó **–ë–µ–∑ —Ç–∞–±–ª–∏—Ü—ã ‚Äî –æ—Ü–µ–Ω–∫–∞ –Ω–µ –≤—ã—à–µ ¬´4¬ª**


üìú **–õ–∏—Ü–µ–Ω–∑–∏—è:** CC BY-NC-SA 4.0  
üë®‚Äçüè´ **–ê–≤—Ç–æ—Ä:** –†—É—Å–ª–∞–Ω –†–∏–Ω–∞—Ç–æ–≤–∏—á –°–∞—Ñ–∏—É–ª–∏–Ω  
üìÖ **–î–∞—Ç–∞:** 27.02.2026

üîô üìö üîú –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫—É—Ä—Å—É  
| [–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/LESSON17.MD) | &nbsp; | [–°–ª–µ–¥—É—é—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/LESSON18.MD) |
|:--------------------------------------:|:------:|:-------------------------------------:|
| üè† [–õ–µ–∫—Ü–∏—è ‚Ññ17](../LESSONS/LESSON17.MD) | üìñ [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](../README.MD) | üíª [–õ–µ–∫—Ü–∏—è ‚Ññ18](../LESSONS/LESSON18.MD) |
