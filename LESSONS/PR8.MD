### ๐ ๐ ๐ ะะฐะฒะธะณะฐัะธั ะฟะพ ะบัััั

| [ะัะตะดัะดััะตะต ะทะฐะฝััะธะต](../LESSONS/LESSON8.MD) | &nbsp; | [ะกะปะตะดัััะตะต ะทะฐะฝััะธะต](../LESSONS/LESSON9.MD) |
|:--------------------------------------:|:------:|:-------------------------------------:|
| ๐ [ะะตะบัะธั โ8](../LESSONS/LESSON8.MD) | ๐ [ะกะพะดะตัะถะฐะฝะธะต](../README.MD) | ๐ป [ะะตะบัะธั โ9](../LESSONS/LESSON9.MD) |
---

# ะัะฐะบัะธัะตัะบะฐั ัะฐะฑะพัะฐ โ8  
## ะะฑะฝะพะฒะปะตะฝะธะต ััะฐัะธััะธะบะธ; ะฐะฝะฐะปะธะท ะฟัะพััะพะณะพ ะฟะปะฐะฝะฐ ะฒัะฟะพะปะฝะตะฝะธั

> **ะฆะตะปั**: ะะฐััะธัััั ะฝะฐัะพะดะธัั ัััะฐัะตะฒััั ััะฐัะธััะธะบั ะฟะพ ัะฐััะพะถะดะตะฝะธั *ยซะัะตะฝะบะฐ ัััะพะบยป* ะธ *ยซะคะฐะบั ัััะพะบยป*, ะฟะพะฝะธะผะฐัั ะปะพะณะธะบั ะฒัะฑะพัะฐ ะฟะปะฐะฝะฐ SQL Serverโะพะผ, ะธ ััััะฐะฝััั ัะทะบะธะต ะผะตััะฐ ะทะฐ 1 ะบะพะผะฐะฝะดั โ `UPDATE STATISTICS`.  
> **ะัะพะดะพะปะถะธัะตะปัะฝะพััั**: 2 ะฐะบะฐะดะตะผะธัะตัะบะธั ัะฐัะฐ  
> **ะะฑะพััะดะพะฒะฐะฝะธะต**: SSMS, SQL Server Developer Edition

---

## ๐ฅ ะจะฐะณ 0. ะกัะฐััะพะฒัะน ัะบัะธะฟั (ะฒัะฟะพะปะฝะธัะต ัะตะปะธะบะพะผ)

```sql
-- ะกะพะทะดะฐัะผ ััะตะฑะฝัั ะะ
DROP DATABASE IF EXISTS StatsLab;
CREATE DATABASE StatsLab;
GO
USE StatsLab;
GO
-- ะขะฐะฑะปะธัะฐ ะะะ ะฟะตัะฒะธัะฝะพะณะพ ะบะปััะฐ โ ะบััะฐ (HEAP)
CREATE TABLE Orders (
    OrderID int IDENTITY(1,1),  -- โ ะะะข PK
    CustomerID int,
    Amount decimal(10,2),
    Status char(10)
);
GO

-- 10 000 ยซััะฐัััยป ะทะฐะบะฐะทะพะฒ
INSERT INTO Orders (CustomerID, Amount, Status)
SELECT TOP 10000 
    ABS(CHECKSUM(NEWID())) % 100 + 1,
    CAST(RAND(CHECKSUM(NEWID())) * 1000 AS decimal(10,2)),
    'active'
FROM master.dbo.spt_values a, master.dbo.spt_values b;
GO

-- ะะฝะดะตะบั ะฟะพ Status (ะฝะต ะฟะพะบััะฒะฐััะธะน!)
CREATE NONCLUSTERED INDEX IX_Orders_Status ON Orders(Status);
GO

-- ะัะบะปััะฐะตะผ ะฐะฒัะพะพะฑะฝะพะฒะปะตะฝะธะต ะะ ะฒััะฐะฒะบะธ ะฝะพะฒัั
ALTER DATABASE StatsLab SET AUTO_UPDATE_STATISTICS OFF;
GO

-- 5 000 ยซะฝะพะฒััยป ะทะฐะบะฐะทะพะฒ
INSERT INTO Orders (CustomerID, Amount, Status)
SELECT TOP 5000 
    100 + ABS(CHECKSUM(NEWID())) % 50,
    CAST(RAND(CHECKSUM(NEWID())) * 200 AS decimal(10,2)),
    'new'
FROM master.dbo.spt_values a, master.dbo.spt_values b;
GO
```

---

## ๐ ะจะฐะณ 0.5. ะัะพะฒะตัะบะฐ ััะปะพะฒะธะน ัะบัะฟะตัะธะผะตะฝัะฐ (ะพะฑัะทะฐัะตะปัะฝะพ!)

ะัะฟะพะปะฝะธัะต ะธ ัะฑะตะดะธัะตัั, ััะพ ัะตะทัะปััะฐัั **ัะพะฒะฟะฐะดะฐัั ั ะพะถะธะดะฐะตะผัะผะธ**:

#### 1. ะขะฐะฑะปะธัะฐ โ ะบััะฐ?
```sql
SELECT i.type_desc 
FROM sys.indexes i 
WHERE i.object_id = OBJECT_ID('Orders') AND i.index_id = 0;
```
โ **ะะถะธะดะฐะตะผะพ**: Type_desc = `HEAP`

#### 2. ะะฒัะพะพะฑะฝะพะฒะปะตะฝะธะต ะพัะบะปััะตะฝะพ?
```sql
SELECT is_auto_update_stats_on 
FROM sys.databases 
WHERE name = 'StatsLab';
```
โ **ะะถะธะดะฐะตะผะพ**: `0`

#### 3. ะ ััะฐัะธััะธะบะต ะฝะตั `'new'`?
```sql
DBCC SHOW_STATISTICS ('Orders', 'IX_Orders_Status');
```
โ **ะะถะธะดะฐะตะผะพ**: ะฒะพ ะฒะบะปะฐะดะบะต **ยซะะธััะพะณัะฐะผะผะฐยป** โ ัะพะปัะบะพ `RANGE_HI_KEY = 'active'`.

> โ๏ธ **ะัะปะธ `'new'` ะตััั โ ะฟะตัะตัะพะทะดะฐะนัะต ะะ!** ะะพััะดะพะบ ะบัะธัะธัะตะฝ:  
> `INSERT 'active'` โ `CREATE INDEX` โ `SET AUTO_UPDATE OFF` โ `INSERT 'new'`.

![8_1.png](8_1.png)

---

## ๐ ะะฐะดะฐะฝะธะต 1. ะะธะฐะณะฝะพััะธะบะฐ: ะฝะฐะนะดะธัะต ัะฐััะพะถะดะตะฝะธะต ะัะตะฝะบะฐ/ะคะฐะบั

1. ะะบะปััะธัะต **`Ctrl + M`** (ะะตะนััะฒะธัะตะปัะฝัะน ะฟะปะฐะฝ ะฒัะฟะพะปะฝะตะฝะธั).  
2. ะัะฟะพะปะฝะธัะต:
   ```sql
   SET STATISTICS IO ON;
   SELECT OrderID, Amount FROM Orders WHERE Status = 'new';
   ```

3. ะ ยซะะปะฐะฝะต ะฒัะฟะพะปะฝะตะฝะธัยป ะฝะฐะนะดะธัะต:  
   - `ะะฐััััะฝะพะต ัะธัะปะพ ัััะพะบ ะดะปั ะฒัะตั ะฒัะฟะพะปะฝะตะฝะธะน` (Estimated Number of Rows),  
   - `ะคะฐะบัะธัะตัะบะพะต ัะธัะปะพ ัััะพะบ ะดะปั ะฒัะตั ะฒัะฟะพะปะฝะตะฝะธะน` (Actual Number of Rows).

4. ะ ยซะกะพะพะฑัะตะฝะธััยป ะทะฐะฟะธัะธัะต:  
   - `ะปะพะณะธัะตัะบะธะต ะพะฟะตัะฐัะธะธ ััะตะฝะธั`.
   - `ะทะฐััะฐัะตะฝะฝะพะต ะฒัะตะผั`

5. ะ ะพััััะต ัะบะฐะถะธัะต:  
   - ะขะธะฟ ะพะฟะตัะฐัะพัะฐ (ะฝะฐะฟัะธะผะตั, `ะัะพัะผะพัั ัััะพะบ ัะฐะฑะปะธัั`),  
   - ะะพัะตะผั SQL Server ะฒัะฑัะฐะป ะธะผะตะฝะฝะพ ะตะณะพ?

![8_2.png](8_2.png)

---

## ๐ ะกะฟัะฐะฒะบะฐ: ะัะบัะดะฐ ะฑะตััััั ะดัะพะฑะฝะพะต ัะธัะปะพ 122.474? 

> ๐ก **SQL Server ะฝะต ยซััะธัะฐะตัยป ัััะพะบะธ โ ะพะฝ *ะพัะตะฝะธะฒะฐะตั* ะธั ะฟะพ ััะฐัะธััะธะบะต.**  
> ะัะปะธ ะทะฝะฐัะตะฝะธะต ะพััััััะฒัะตั ะฒ ะณะธััะพะณัะฐะผะผะต, ะพะฝ **ะฝะต ะณะฐะดะฐะตั**, ะฐ ะธัะฟะพะปัะทัะตั **ะผะฐัะตะผะฐัะธัะตัะบะธะต ะผะพะดะตะปะธ**. ะะพั ะบะฐะบ ััะพ ัะฐะฑะพัะฐะตั.

---

### 1. ะะพัะตะผั `'new'` ะพััััััะฒัะตั ะฒ ะณะธััะพะณัะฐะผะผะต?

- ะั ะพัะบะปััะธะปะธ `AUTO_UPDATE_STATISTICS`,  
- ะััะฐะฒะธะปะธ 5 000 ัััะพะบ ัะพ `'new'` **ะฟะพัะปะต** ัะพะทะดะฐะฝะธั ะธะฝะดะตะบัะฐ,  
- โ ะกัะฐัะธััะธะบะฐ ะพััะฐะปะฐัั ั ะดะฐะฝะฝัะผะธ ัะพะปัะบะพ ะดะปั `'active'`.

---

### 2. ะงัะพ ะดะตะปะฐะตั ะพะฟัะธะผะธะทะฐัะพั, ะบะพะณะดะฐ ะทะฝะฐัะตะฝะธะต ะฝะต ะฝะฐะนะดะตะฝะพ?

ะะฝ **ะฝะต ะฟะฐะฝะธะบัะตั** โ ะพะฝ ะธัะฟะพะปัะทัะตั **ะฒะตะบัะพั ะฟะปะพัะฝะพััะธ (Density Vector)** ะธ **ัะฒัะธััะธะบะธ ะพัะตะฝัะธะบะฐ ะบะฐัะดะธะฝะฐะปัะฝะพััะธ (Cardinality Estimator)**.

#### ๐น ะะปะพัะฝะพััั (Density)
- ะะปะพัะฝะพััั = `1 / ัะธัะปะพ ัะฝะธะบะฐะปัะฝัั ะทะฝะฐัะตะฝะธะน`,  
- ะะพ ะฒััะฐะฒะบะธ `'new'`: ัะฝะธะบะฐะปัะฝัั ะทะฝะฐัะตะฝะธะน = 1 (`'active'`) โ ะฟะปะพัะฝะพััั = **1.0**,  
- ะะพ ะฟะพัะปะต ะฒััะฐะฒะบะธ (ัะพัั ััะฐัะธััะธะบะฐ ะฝะต ะพะฑะฝะพะฒะปะตะฝะฐ) SQL Server **ะบะพััะตะบัะธััะตั** ะฟะปะพัะฝะพััั ะฟะพ ัะฐะบัะธัะตัะบะพะผั ัะธัะปั ัััะพะบ.

#### ๐น ะญะฒัะธััะธะบะฐ ะดะปั ะฝะพะฒัั ะทะฝะฐัะตะฝะธะน
ะ SQL Server 2016+ (ะฝะพะฒัะน CE) ะธัะฟะพะปัะทัะตััั ัะพัะผัะปะฐ:  
```
ะัะตะฝะบะฐ = SQRT(ะะฑัะตะต ัะธัะปะพ ัััะพะบ)  
       = SQRT(15 000) โ 122.47 โ **ัะพะฒะฟะฐะดะฐะตั ั ะฒะฐัะธะผ ัะตะทัะปััะฐัะพะผ!**
```

โ **ะัะพะฒะตัะบะฐ**:  
```sql
SELECT SQRT(15000.0) AS Test;  -- ะะตะทัะปััะฐั: 122.474487...
```

>  SQL Server ัะณะฐะดัะฒะฐะตั ะบะพะปะธัะตััะฒะพ ัััะพะบ ะดะปั ะทะฝะฐัะตะฝะธั 'new', ะฟะพัะพะผั ััะพ ะพะฝะพ ะฝะต ะฑัะปะพ ัััะตะฝะพ ะฒ ััะฐัะธััะธะบะต.
ะัะพะฑะฝะพะต ัะธัะปะพ ะฒะพะทะฝะธะบะฐะตั ะธะท-ะทะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ัััะตะดะฝะตะฝะฝัั ะธ ะฒะตัะพััะฝะพััะฝัั ะผะฐัะตะผะฐัะธัะตัะบะธั ะผะพะดะตะปะตะน,
ะฐ ะฝะต ัะตะฐะปัะฝะพะณะพ ะฟะพะดััะตัะฐ ัััะพะบ.

---

## ๐ ะะฐะดะฐะฝะธะต 2. ะะฑะฝะพะฒะปะตะฝะธะต ััะฐัะธััะธะบะธ โ ะบะฐะบ ะผะตะฝัะตััั ะฟะปะฐะฝ?

1. ะะฑะฝะพะฒะธัะต ััะฐัะธััะธะบั:
   ```sql
   UPDATE STATISTICS Orders IX_Orders_Status;
   ```

2. ะะพะฒัะพัะธัะต ะทะฐะฟัะพั ะธะท ะะฐะดะฐะฝะธั 1.  
3. ะกัะฐะฒะฝะธัะต:  
   - `ะัะตะฝะบะฐ ัััะพะบ` ะดะพ/ะฟะพัะปะต,  
   - `ะปะพะณะธัะตัะบะธะต ะพะฟะตัะฐัะธะธ ััะตะฝะธั`, 
   - `ะทะฐััะฐัะตะฝะฝะพะต ะฒัะตะผั`,
   - `ะขะธะฟ ะพะฟะตัะฐัะพัะฐ`.

> ๐ก **ะะพะดัะบะฐะทะบะฐ**: ะฟะพัะปะต ะพะฑะฝะพะฒะปะตะฝะธั `ะคะฐะบัะธัะตัะบะพะต ัะธัะปะพ ัััะพะบ ะดะปั ะฒัะตั ะฒัะฟะพะปะฝะตะฝะธะน` ะดะพะปะถะฝะฐ ััะฐัั ะฑะปะธะทะบะฐ ะบ `ะะฐััััะฝะพะต ัะธัะปะพ ัััะพะบ ะดะปั ะฒัะตั ะฒัะฟะพะปะฝะตะฝะธะน`.

![8_3.png](8_3.png)

4. ะ ะพััััะต **ะทะฐะฟะพะปะฝะธัะต ัะฐะฑะปะธัั**:

| ะะพะบะฐะทะฐัะตะปั | ะะพ ะพะฑะฝะพะฒะปะตะฝะธั | ะะพัะปะต ะพะฑะฝะพะฒะปะตะฝะธั |
|-----------|---------------|------------------|
| **ะะฐััััะฝะพะต ัะธัะปะพ ัััะพะบ ะดะปั ะฒัะตั ะฒัะฟะพะปะฝะตะฝะธะน** | ... | ... |
| **ะคะฐะบัะธัะตัะบะพะต ัะธัะปะพ ัััะพะบ ะดะปั ะฒัะตั ะฒัะฟะพะปะฝะตะฝะธะน** | ... | ... |
| **ะปะพะณะธัะตัะบะธะต ะพะฟะตัะฐัะธะธ ััะตะฝะธั** | ... | ... |
| **ะทะฐััะฐัะตะฝะฝะพะต ะฒัะตะผั** | ... | ... |
| **ะขะธะฟ ะพะฟะตัะฐัะพัะฐ** | ... | ... |

> ๐ก **ะะถะธะดะฐะตะผะพ**:  
> - `ะะฐััััะฝะพะต ัะธัะปะพ ัััะพะบ` = **5 000**,  
> - ะะปะฐะฝ ะผะพะถะตั ะพััะฐัััั `ะัะพัะผะพัั ัััะพะบ ัะฐะฑะปะธัั` (ะตัะปะธ 5 000 ัััะพะบ โ ะฒัั ะตัั ะผะฐะปะพ ะดะปั 15 000).

---

---

## ๐ ะะฐะดะฐะฝะธะต 3. ะะพะบััะฒะฐััะธะน ะธะฝะดะตะบั โ ะบะฐะบ ัะฑัะฐัั Key Lookup?

1. ะฃะดะฐะปะธัะต ััะฐััะน ะธะฝะดะตะบั:
   ```sql
   DROP INDEX IX_Orders_Status ON Orders;
   ```

2. ะกะพะทะดะฐะนัะต ะฟะพะบััะฒะฐััะธะน ะธะฝะดะตะบั:
   ```sql
   CREATE NONCLUSTERED INDEX IX_Cover 
   ON Orders(Status) 
   INCLUDE (OrderID, Amount);
   ```

3. ะะพะฒัะพัะธัะต ะทะฐะฟัะพั.  
4. ะ ะพััััะต ัะบะฐะถะธัะต:  
   - ะััะตะท ะปะธ `ะฃัะพัะฝัััะธะน ะทะฐะฟัะพั RID (ะบััะฐ)`?  
   - ะกะบะพะปัะบะพ `ะปะพะณะธัะตัะบะธะต ะพะฟะตัะฐัะธะธ ััะตะฝะธั` ัะตะฟะตัั?

---

---

## ๐ ะะฐะดะฐะฝะธะต 3. ะะฐัะฐะฝัะธัะพะฒะฐะฝะฝัะน Key Lookup (ะฝะฐ ะฝะพะฒะพะน ะะ)

> ๐ก **ะ ะฟัะตะดัะดััะตะน ัะฐะฑะปะธัะต `Orders` Key Lookup ะฝะต ะฟะพัะฒะปัะปัั, ะฟะพัะพะผั ััะพ `SELECT *` ะฝะต ััะตะฑัะตั ะพะฑัะฐัะตะฝะธั ะบ ะดะฐะฝะฝัะผ (ะธะฝะดะตะบั ะฟะพะบััะฒะฐะตั `Status`, ะฐ `OrderID` โ ะฒ ะบะปะฐััะตัะธะทะพะฒะฐะฝะฝะพะผ ัะบะฐะทะฐัะตะปะต).**  
> **ะขะตะฟะตัั ัะพะทะดะฐะดะธะผ ัะฐะฑะปะธัั, ะณะดะต Key Lookup ะฝะตะธะทะฑะตะถะตะฝ.**

#### ะจะฐะณ 1. ะกะพะทะดะฐะนัะต ะฝะพะฒัั ะะ (ะฒัะฟะพะปะฝะธัะต ัะตะปะธะบะพะผ)
```sql
DROP DATABASE IF EXISTS StatsLab3;
CREATE DATABASE StatsLab3;
GO
USE StatsLab3;
GO

CREATE TABLE Orders (
    OrderID int IDENTITY(1,1),
    CustomerID int,
    Amount decimal(10,2),
    Status char(10),
    Description VARCHAR(8000)  -- โ ะจะธัะพะบะธะน ััะพะปะฑะตั (ะณะฐัะฐะฝัะธััะตั Key Lookup)
);
GO

INSERT INTO Orders (CustomerID, Amount, Status, Description)
SELECT TOP 10000 
    1, 100.00, 'active', REPLICATE('Old order ', 100)
FROM sys.all_objects a, sys.all_objects b;
GO

CREATE NONCLUSTERED INDEX IX_Orders_Status ON Orders(Status);
GO

ALTER DATABASE StatsLab3 SET AUTO_UPDATE_STATISTICS OFF;
GO

INSERT INTO Orders (CustomerID, Amount, Status, Description)
SELECT TOP 5000 
    2, 200.00, 'new', REPLICATE('New order ', 100)
FROM sys.all_objects a, sys.all_objects b;
GO
```

#### ะจะฐะณ 2. ะัะฟะพะปะฝะธัะต ะทะฐะฟัะพั ั ัะธัะพะบะธะผ ััะพะปะฑัะพะผ
```sql
SET STATISTICS IO ON;
SET STATISTICS TIME ON;

-- ะะฐะฟัะฐัะธะฒะฐะตะผ Description โ Key Lookup ะฝะตะธะทะฑะตะถะตะฝ
SELECT OrderID, Amount, Description 
FROM Orders 
WHERE Status = 'new';
```

#### ะจะฐะณ 3. ะ ะพััััะต:  
- ะกะบัะธะฝัะพั ะฟะปะฐะฝะฐ ั **ะะปะพะถะตะฝะฝัะผะธ ัะธะบะปะฐะผะธ** ะธ **ะฃัะพัะฝัััะธะผ ะทะฐะฟัะพัะพะผ RID (ะบััะฐ)**,  
- ะะฝะฐัะตะฝะธั ะธะท ัะฐะฑะปะธัั ะฒััะต.

---

## ๐ ะะฐะดะฐะฝะธะต 4. ะะพะบััะฒะฐััะธะน ะธะฝะดะตะบั โ ะบะฐะบ ัะฑัะฐัั Key Lookup?

1. ะฃะดะฐะปะธัะต ััะฐััะน ะธะฝะดะตะบั:
   ```sql
    USE StatsLab3;
    GO
    DROP INDEX IX_Orders_Status ON Orders;
   ```

2. ะกะพะทะดะฐะนัะต ะฟะพะบััะฒะฐััะธะน ะธะฝะดะตะบั:
   ```sql
    USE StatsLab3;
    GO
   CREATE NONCLUSTERED INDEX IX_Cover 
   ON Orders(Status) 
   INCLUDE (OrderID, Amount, Description);
   ```

3. ะะพะฒัะพัะธัะต ะทะฐะฟัะพั ะธะท ะะฐะดะฐะฝะธั 3.  
4. ะ ะพััััะต ัะบะฐะถะธัะต:  
   - ะััะตะท ะปะธ **ะฃัะพัะฝัััะธะน ะทะฐะฟัะพั RID (ะบััะฐ)**?  
   - ะกะบะพะปัะบะพ **ะปะพะณะธัะตัะบะธะต ะพะฟะตัะฐัะธะธ ััะตะฝะธั** ัะตะฟะตัั?  
   - ะะฐะบ ะธะทะผะตะฝะธะปะพัั **ะทะฐััะฐัะตะฝะฝะพะต ะฒัะตะผั**?

---

---


## ๐ ะะฐะดะฐะฝะธะต 7. ะัะฒะตัั ะฝะฐ ะฒะพะฟัะพัั

1. ะะพัะตะผั ะฟัะธ `Status = 'new'` SQL Server ะพัะตะฝะธะฒะฐะตั 122 ัััะพะบะธ?  
2. ะ ััะผ ัะฐะทะฝะธัะฐ ะผะตะถะดั `ะัะตะฝะบะฐ ัััะพะบ` ะธ `ะคะฐะบั ัััะพะบ`?  
3. ะะพัะตะผั `Table Scan` ะผะพะถะตั ะฑััั ะฒัะณะพะดะฝะตะต `Index Seek + Key Lookup`?  
4. ะะฐะบ ะฟะพััะดะพะบ ััะพะปะฑัะพะฒ ะฒ ะธะฝะดะตะบัะต ะฒะปะธัะตั ะฝะฐ ััะฐัะธััะธะบั?  
5. ะะฐัะตะผ ะฝัะถะตะฝ `modification_counter` ะฒ `sys.dm_db_stats_properties`?

---

## ๐ **ะขัะตะฑะพะฒะฐะฝะธั ะบ ะพััััั (Word-ะดะพะบัะผะตะฝั)**

# ะคะฐะนะป ะดะพะปะถะตะฝ ะฝะฐะทัะฒะฐัััั: **`ะัััั_ะคะฐะผะธะปะธั_ะััะฟะฟะฐ.docx`**  (ะฝะฐะฟัะธะผะตั, `ะัััั_Petrov_IS-23.docx`)

**ะกัััะบัััะฐ ะพััััะฐ:**

1. **ะขะธััะปัะฝัะน ะปะธัั** (ะคะะ, ะณััะฟะฟะฐ, ะดะฐัะฐ, ะฝะฐะทะฒะฐะฝะธะต ัะฐะฑะพัั).  
2. **ะฆะตะปั ัะฐะฑะพัั**.  
3. **ะฅะพะด ะฒัะฟะพะปะฝะตะฝะธั**:  
   - ะะพะปะฝัะน ัะตะบัั **ััะฐััะพะฒะพะณะพ ัะบัะธะฟัะฐ** (ั ะฒะฐัะตะน ัะฐะผะธะปะธะตะน ะฒ ะบะพะผะผะตะฝัะฐัะธะธ).  
   - **ะกะบัะธะฝัะพัั** ะธะท SSMS ัะพ **ะฒัะตะผะธ ะฒัะฟะพะปะฝะตะฝะฝัะผะธ SQL-ะบะพะผะฐะฝะดะฐะผะธ** ะธะท ะทะฐะดะฐะฝะธะน 1โ4.  
     - ะะฐ ัะบัะธะฝัะพัะต ะดะพะปะถะฝั ะฑััั ะฒะธะดะฝั:  
       - ะขะตะบัั ะบะพะผะฐะฝะดั(ั),  
       - ะกะพะพะฑัะตะฝะธะต ะพะฑ ััะฟะตัะฝะพะผ ะฒัะฟะพะปะฝะตะฝะธะธ (ยซะะพะผะฐะฝะดั ะฒัะฟะพะปะฝะตะฝั ััะฟะตัะฝะพยป),  
       - ะะผั ะฑะฐะทั ะดะฐะฝะฝัั ะฒ ะทะฐะณะพะปะพะฒะบะต ะพะบะฝะฐ ะธะปะธ ะฒ ัััะพะบะต ัะพััะพัะฝะธั.  
   - ะะพะด ะบะฐะถะดัะผ ัะบัะธะฝัะพัะพะผ โ **ะฟะพะดะฟะธัั ั ะฟะพััะฝะตะฝะธะตะผ**, ะฝะฐะฟัะธะผะตั:  
     > *ะะธั. 1. ะะตะทัะปััะฐั ะฟัะพะฒะตัะบะธ HEAP ะธ AUTO_UPDATE OFF.*  
     > *ะะธั. 2. ะะปะฐะฝ ะฒัะฟะพะปะฝะตะฝะธั ะดะพ ะพะฑะฝะพะฒะปะตะฝะธั ััะฐัะธััะธะบะธ: ะัะตะฝะบะฐ = 122, ะคะฐะบั = 5000.*  
     > *ะะธั. 3. ะะบะฝะพ ยซะกะพะพะฑัะตะฝะธัยป ั ะปะพะณะธัะตัะบะธะต ะพะฟะตัะฐัะธะธ ััะตะฝะธั = 14 850.*  
     > *ะะธั. 4. ะะปะฐะฝ ะฟะพัะปะต ะฟะพะบััะฒะฐััะตะณะพ ะธะฝะดะตะบัะฐ: ัะพะปัะบะพ ยซะะพะธัะบ ะฒ ะธะฝะดะตะบัะตยป.*  
   - **ะะฑัะทะฐัะตะปัะฝะพ ะฒะบะปััะธัะต ัะฐะฑะปะธัั ััะฐะฒะฝะตะฝะธั ัััะตะบัะธะฒะฝะพััะธ**:
     | ะกัะตะฝะฐัะธะน | `ะปะพะณะธัะตัะบะธะต ะพะฟะตัะฐัะธะธ ััะตะฝะธั` | `ะทะฐััะฐัะตะฝะฝะพะต ะฒัะตะผั` | `ะัะตะฝะบะฐ ัััะพะบ` | `ะคะฐะบั ัััะพะบ` |
     |----------|-----------------------------|---------------------|----------------|--------------|
     | ะะพ ะพะฑะฝะพะฒะปะตะฝะธั | 14 850 | 6.2 ัะตะบ | 122 | 5 000 |
     | ะะพัะปะต `UPDATE STATISTICS` | 120 | 0.5 ัะตะบ | 4 980 | 5 000 |
     | ะะพัะปะต ะฟะพะบััะฒะฐััะตะณะพ ะธะฝะดะตะบัะฐ | 25 | 0.1 ัะตะบ | 5 000 | 5 000 |
   - ะัะฒะตัั ะฝะฐ ะฒะพะฟัะพัั ะธะท ะทะฐะดะฐะฝะธั 4.  
4. **ะัะฒะพะด**:  
   - ะงัะพ ะฝะพะฒะพะณะพ ะฒั ัะทะฝะฐะปะธ ะพ ััะฐัะธััะธะบะต ะธ ะฒัะฑะพัะต ะฟะปะฐะฝะฐ?  
   - ะก ะบะฐะบะธะผะธ ัััะดะฝะพัััะผะธ ััะพะปะบะฝัะปะธัั ะฟัะธ ัะฐะฑะพัะต ั `DBCC SHOW_STATISTICS` ะธ ะฟะปะฐะฝะพะผ ะฒัะฟะพะปะฝะตะฝะธั?  
   - ะะพัะตะผั ะฒะฐะถะฝะพ ะพะฑะฝะพะฒะปััั ััะฐัะธััะธะบั ะฟะพัะปะต ะผะฐััะพะฒัั ะธะทะผะตะฝะตะฝะธะน?

> โ **ะะฐะถะฝะพ**:  
> - ะัััั **ะฑะตะท ัะบัะธะฝัะพัะพะฒ** (ะธะปะธ ะฑะตะท ะฐะปััะตัะฝะฐัะธะฒะฝะพะณะพ ะบะพะดะฐ ั ะบะพะผะผะตะฝัะฐัะธัะผะธ) ะฝะต ะฟัะธะฝะธะผะฐะตััั.  
> - **ะะตะท ัะฐะฑะปะธัั ััะฐะฒะฝะตะฝะธั ะธ ะฟะพััะฝะตะฝะธั ะัะตะฝะบะฐ/ะคะฐะบั** โ ะผะฐะบัะธะผะฐะปัะฝะฐั ะพัะตะฝะบะฐ **ะฝะต ะฒััะต ยซ4ยป**.  
> - ะกะบัะธะฝัะพัั ะดะพะปะถะฝั ะฑััั **ัััะบะธะผะธ ะธ ัะธัะฐะตะผัะผะธ**.  
> - ะะต ะฒััะฐะฒะปัะนัะต ะพะดะธะฝ ะพะฑัะธะน ัะบัะธะฝัะพั ะฒัะตะณะพ ะพะบะฝะฐ SSMS.

---

## ๐ค ะกะดะฐัะฐ ัะฐะฑะพัั

1. ะัะพัะผะธัะต ะพัััั ะฒ Microsoft Word.  
2. ะกะพััะฐะฝะธัะต ัะฐะนะป ะฒ ัะพัะผะฐัะต `.docx`.  
3. ะะตัะตะนะดะธัะต ะฟะพ ัััะปะบะต ะฝะฐ [**Google-ัะพัะผั**](https://forms.gle/ZyRB7xgMEPcXqGim7).  
4. ะฃะบะฐะถะธัะต ะคะะ ะธ ะณััะฟะฟั.  
5. ะะฐะณััะทะธัะต ัะฐะนะป ะพััััะฐ.  
6. **ะกัะพะบ ัะดะฐัะธ**: ะดะพ 23:59 **11 ะดะตะบะฐะฑัั 2025 ะณ.**

---

## ๐ ะัะธัะตัะธะธ ะพัะตะฝะธะฒะฐะฝะธั

| ะัะธัะตัะธะน | ะัะตะฝะบะฐ ยซ5ยป | ะัะตะฝะบะฐ ยซ4ยป | ะัะตะฝะบะฐ ยซ3ยป |
|--------|-------------|-------------|-------------|
| **ะะฐะดะฐะฝะธั 1โ3** | ะัะฟะพะปะฝะตะฝั ะฟะพะปะฝะพัััั, ั ะฟะพััะฝะตะฝะธัะผะธ | ะัะฟะพะปะฝะตะฝั, ะฝะพ ะฑะตะท ะฐะฝะฐะปะธะทะฐ | ะขะพะปัะบะพ ัะบะพะฟะธัะพะฒะฐะฝั |
| **ะะฐะดะฐะฝะธั 4โ5** | ะะฝะฐะปะธะท ะณะธััะพะณัะฐะผะผั ะธ ะฟะพััะดะบะฐ ััะพะปะฑัะพะฒ โ ะฟะพะปะฝัะน | ะััั ัะฐััััั, ะฝะพ ะฑะตะท ะฒัะฒะพะดะพะฒ | ะะต ะฒัะฟะพะปะฝะตะฝั |
| **ะะฐะดะฐะฝะธะต 6** | ะกะบัะธะฟั ัะฐะฑะพัะฐะตั, ะบะตะนั ะพะฑัััะฝัะฝ | ะกะบัะธะฟั ะตััั, ะบะตะนั ัะฐััะธัะฝะพ | ะะต ะฒัะฟะพะปะฝะตะฝะพ |
| **ะัะฒะตัั ะฝะฐ ะฒะพะฟัะพัั** | ะัะต ะพัะฒะตัั ะฟะพะปะฝัะต, ั ัะตัะผะธะฝะฐะผะธ | 3โ4 ะพัะฒะตัะฐ | โค2 ะพัะฒะตัะฐ |
| **ะัะพัะผะปะตะฝะธะต** | ะกัััะบัััะฐ ัะพะฑะปัะดะตะฝะฐ, ัะบัะธะฝัะพัั ะตััั | ะะตะปะบะธะต ะฝะฐัััะตะฝะธั | ะะตะท ัะบัะธะฝัะพัะพะฒ |

> ๐ก **ะะฐะบัะธะผะฐะปัะฝัะน ะฑะฐะปะป**: 5  
> โ **ะะตะท ัะฐะฑะปะธัั ััะฐะฒะฝะตะฝะธั ะธ ะะฐะดะฐะฝะธะน 4โ6** โ ะฝะต ะฒััะต ยซ4ยป.

---

### ๐ ๐ ๐ ะะฐะฒะธะณะฐัะธั ะฟะพ ะบัััั

| [ะัะตะดัะดััะตะต ะทะฐะฝััะธะต](../LESSONS/LESSON8.MD) | &nbsp; | [ะกะปะตะดัััะตะต ะทะฐะฝััะธะต](../LESSONS/LESSON8.MD) |
|:--------------------------------------:|:------:|:-------------------------------------:|
| ๐ [ะะตะบัะธั โ7](../LESSONS/LESSON8.MD) | ๐ [ะกะพะดะตัะถะฐะฝะธะต](../README.MD) | ๐ป [ะะตะบัะธั โ9](../LESSONS/LESSON9.MD) |

---
