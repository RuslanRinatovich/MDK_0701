### üîô üìö üîú –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫—É—Ä—Å—É

| [–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/PR6.MD) | &nbsp; | [–°–ª–µ–¥—É—é—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/PR7.MD) |
|:--------------------------------------:|:------:|:-------------------------------------:|
| üè† [–ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ6](../LESSONS/PR6.MD) | üìñ [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](../README.MD) | üíª [–ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ7](../LESSONS/PR7.MD) |

---

üéì **–õ–µ–∫—Ü–∏—è 7. –§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤: –ø—Ä–∏—á–∏–Ω—ã –∏ –º–µ—Ç–æ–¥—ã –±–æ—Ä—å–±—ã**  
‚è±Ô∏è **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 90 –º–∏–Ω—É—Ç  
üéØ **–¶–µ–ª—å –ª–µ–∫—Ü–∏–∏**:  
–ü–æ–Ω—è—Ç—å, **–ø–æ—á–µ–º—É –¥–∞–∂–µ —Å –∏–Ω–¥–µ–∫—Å–æ–º –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ**, –Ω–∞—É—á–∏—Ç—å—Å—è –Ω–∞—Ö–æ–¥–∏—Ç—å –∏ —É—Å—Ç—Ä–∞–Ω—è—Ç—å **—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é –∏–Ω–¥–µ–∫—Å–æ–≤** ‚Äî –æ–¥–Ω—É –∏–∑ —Å–∞–º—ã—Ö —á–∞—Å—Ç—ã—Ö –ø—Ä–∏—á–∏–Ω –ø–∞–¥–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö.

---

## üìñ –ß–∞—Å—Ç—å 0. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –∑–∞–ø–æ–º–Ω–∏—Ç–µ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞

> üí° **–§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî —ç—Ç–æ –Ω–µ –æ—à–∏–±–∫–∞. –≠—Ç–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–ª–µ–¥—Å—Ç–≤–∏–µ —Ä–∞–±–æ—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.**  
>  
> ‚Äî –í—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ, —É–¥–∞–ª—è–µ—Ç–µ, –º–µ–Ω—è–µ—Ç–µ –∑–∞–ø–∏—Å–∏ ‚Üí —Å—Ç—Ä–∞–Ω–∏—Ü—ã ¬´—Ä–≤—É—Ç—Å—è¬ª, ¬´–ø–µ—Ä–µ–ø–æ–ª–Ω—è—é—Ç—Å—è¬ª, ¬´—Ä–∞–∑–±–µ–≥–∞—é—Ç—Å—è¬ª –ø–æ –¥–∏—Å–∫—É.  
> ‚Äî –°–æ –≤—Ä–µ–º–µ–Ω–µ–º –¥–∞–∂–µ —Ö–æ—Ä–æ—à–∏–π –∏–Ω–¥–µ–∫—Å **–ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –ø–æ–º–æ–≥–∞—Ç—å**.  
> ‚Äî –ù–æ! –≠—Ç–∏–º –º–æ–∂–Ω–æ **—É–ø—Ä–∞–≤–ª—è—Ç—å** ‚Äî –∏ –º—ã —Å–µ–≥–æ–¥–Ω—è –Ω–∞—É—á–∏–º—Å—è —ç—Ç–æ –¥–µ–ª–∞—Ç—å.

---

## üìñ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–µ—Ä–º–∏–Ω–æ–≤ (–∫–∞–∫ –≤ SSMS –∏ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ)

| –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ –∂–∏–∑–Ω–∏ | –ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ä—É—Å—Å–∫–æ–º SSMS | –ß—Ç–æ —ç—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ |
|------------------------|-------------------------------|------------------------|
| –ò–Ω–¥–µ–∫—Å ¬´–ø–µ—Ä–µ—Å—Ç–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å¬ª | **–í—ã—Å–æ–∫–∞—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è** | –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏–Ω–¥–µ–∫—Å–∞ –ª–µ–∂–∞—Ç –Ω–µ –ø–æ –ø–æ—Ä—è–¥–∫—É ‚Üí —Ä–æ—Å—Ç —á—Ç–µ–Ω–∏–π —Å –¥–∏—Å–∫–∞ |
| ¬´–°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—É—Å—Ç—ã–µ¬ª | **–ù–∏–∑–∫–∏–π % –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü** | –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 8 –ö–ë –∑–∞–Ω—è—Ç–æ —Ç–æ–ª—å–∫–æ 3 –ö–ë ‚Üí —Ä–∞—Å—Ç–æ—á–∏—Ç–µ–ª—å—Å—Ç–≤–æ |
| ¬´–ß–∏–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å¬ª | **REORGANIZE** | –ü–æ–¥–º–µ—Ç–∞–µ—Ç, –ø–æ–¥—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç, —Å—à–∏–≤–∞–µ—Ç ‚Äî ¬´–Ω–∞ –ª–µ—Ç—É¬ª, –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ |
| ¬´–ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å¬ª | **REBUILD** | –°–Ω–æ—Å–∏—Ç –∏ —Å—Ç—Ä–æ–∏—Ç –∑–∞–Ω–æ–≤–æ ‚Äî –±—ã—Å—Ç—Ä–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –º–µ—Å—Ç–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏ |
| ¬´–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü¬ª | **sys.dm_db_index_physical_stats** | –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è ¬´–ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏¬ª ‚Äî –ø–æ–∫–∞–∂–µ—Ç, –≥–¥–µ ¬´–±–æ–ª–∏—Ç¬ª |

> üìå **–ó–∞–ø–æ–º–Ω–∏—Ç–µ —Ñ—Ä–∞–∑—É**:  
> *¬´–ò–Ω–¥–µ–∫—Å ‚Äî –∫–∞–∫ –¥–æ—Ä–æ–≥–∞. –ü–æ–∫–∞ –Ω–æ–≤–∞—è ‚Äî –µ–¥–µ—à—å –±—ã—Å—Ç—Ä–æ. –ù–æ —è–º—ã, —Ç—Ä–µ—â–∏–Ω—ã, –æ–±—ä–µ–∑–¥—ã ‚Äî –≤—Å—ë —ç—Ç–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è. –ò—Ö –Ω–∞–¥–æ –≤–æ–≤—Ä–µ–º—è –ª–∞—Ç–∞—Ç—å¬ª.*

---

## 1. –ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è? –î–∞–≤–∞–π—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º‚Ä¶

### üßæ –ê–Ω–∞–ª–æ–≥–∏—è 1: **–¢–µ—Ç—Ä–∞–¥—å —É—á—ë—Ç–∞ –ø–æ—Å—Ç–∞–≤–æ–∫**

–í—ã –≤–µ–¥—ë—Ç–µ –∂—É—Ä–Ω–∞–ª –ø–æ—Å—Ç–∞–≤–æ–∫ –≤ **–æ–±—ã—á–Ω—É—é —Ç–µ—Ç—Ä–∞–¥—å**:

| –°—Ç—Ä. | –î–∞—Ç–∞       | –ü–æ—Å—Ç–∞–≤—â–∏–∫ | –°—É–º–º–∞ |
|------|------------|-----------|-------|
| 1    | 01.01.2025 | –û–û–û ¬´–†–∞—Å—Å–≤–µ—Ç¬ª | 15 000 |
| 2    | 05.01.2025 | –ò–ü –ò–≤–∞–Ω–æ–≤   | 8 500  |
| 3    | 10.01.2025 | –û–û–û ¬´–ó–∞—Ä—è¬ª  | 12 000 |

‚Üí –í–∞–º –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤—Å–µ –ø–æ—Å—Ç–∞–≤–∫–∏ –∑–∞ **—è–Ω–≤–∞—Ä—å** ‚Äî –ø—Ä–æ—Å—Ç–æ –ª–∏—Å—Ç–∞–µ—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥—Ä—è–¥ ‚Üí –±—ã—Å—Ç—Ä–æ.

–¢–µ–ø–µ—Ä—å:
- –í—ã **—É–¥–∞–ª—è–µ—Ç–µ** –∑–∞–ø–∏—Å—å ‚Ññ2 (–ò–ü –ò–≤–∞–Ω–æ–≤ –æ—Ç–º–µ–Ω–∏–ª –ø–æ—Å—Ç–∞–≤–∫—É),  
- –ß–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é **–≤—Å—Ç–∞–≤–ª—è–µ—Ç–µ** –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å –Ω–∞ 03.01.2025 ‚Äî –Ω–æ –º–µ—Å—Ç–æ –Ω–∞ —Å—Ç—Ä.1 –∑–∞–Ω—è—Ç–æ,  
- –í—ã **–ø–∏—à–µ—Ç–µ –µ—ë –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–≤–æ–±–æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Äî ‚Ññ 42**,  
- –ü–æ—Ç–æ–º **—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç–µ** –∑–∞–ø–∏—Å—å ‚Ññ3 ‚Äî —Å—É–º–º–∞ –≤—ã—Ä–æ—Å–ª–∞ –¥–æ 25 000, —Å—Ç—Ä–æ–∫–∞ –Ω–µ –≤–ª–µ–∑–∞–µ—Ç ‚Üí –≤—ã **–ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–µ** –µ—ë –Ω–∞ —Å—Ç—Ä. 43.

–ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å?
```
—Å—Ç—Ä.1 ‚Üí —Å—Ç—Ä.42 (03.01) ‚Üí —Å—Ç—Ä.3 (10.01, —Å—Ç–∞—Ä–∞—è) ‚Üí —Å—Ç—Ä.43 (10.01, –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è)
```
‚Üí –ß—Ç–æ–±—ã –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏ ‚Äî –Ω—É–∂–Ω–æ **–ø—Ä—ã–≥–∞—Ç—å –ø–æ —Ç–µ—Ç—Ä–∞–¥–∏** ‚Üí –º–µ–¥–ª–µ–Ω–Ω–æ.

üîπ **–≠—Ç–æ –∏ –µ—Å—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äî –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –¥–∞–Ω–Ω—ã—Ö.

---

### üìö –ê–Ω–∞–ª–æ–≥–∏—è 2: **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏ –∫–∞—Ç–∞–ª–æ–≥**

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –≥–¥–µ –∫–Ω–∏–≥–∏ —Ä–∞—Å—Å—Ç–∞–≤–ª–µ–Ω—ã **–ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É** (–∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å).

–°–Ω–∞—á–∞–ª–∞:
- –ê ‚Äî –ø–æ–ª–∫–∞ 1,  
- –ë ‚Äî –ø–æ–ª–∫–∞ 2,  
- –í ‚Äî –ø–æ–ª–∫–∞ 3‚Ä¶

–ü–æ—Ç–æ–º:
- –£–¥–∞–ª–∏–ª–∏ 10 –∫–Ω–∏–≥ –Ω–∞ ¬´–ë¬ª,  
- –ö—É–ø–∏–ª–∏ 20 –Ω–æ–≤—ã—Ö ‚Äî –ø–æ—Å—Ç–∞–≤–∏–ª–∏ **–≤ –∫–æ–Ω–µ—Ü –∑–∞–ª–∞**,  
- –ü–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏–ª–∏ ¬´–í–æ–π–Ω—É –∏ –º–∏—Ä¬ª ‚Äî —Ç–µ–ø–µ—Ä—å —Ç–∞–º 2 —Ç–æ–º–∞ ‚Üí –Ω–µ –≤–ª–µ–∑–ª–∏ –Ω–∞ –ø–æ–ª–∫—É ‚Üí –æ–¥–∏–Ω —Ç–æ–º —É—à—ë–ª –Ω–∞ **–∞–Ω—Ç—Ä–µ—Å–æ–ª–∏**.

–¢–µ–ø–µ—Ä—å, —á—Ç–æ–±—ã –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å—ë –æ—Ç –ê –¥–æ –Ø, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—é –Ω—É–∂–Ω–æ:  
`–ø–æ–ª–∫–∞1 ‚Üí –ø–æ–ª–∫–∞2 ‚Üí –∞–Ω—Ç—Ä–µ—Å–æ–ª–∏ ‚Üí –ø–æ–ª–∫–∞3 ‚Üí –¥–∞–ª—å–Ω–∏–π –∑–∞–ª‚Ä¶`  
‚Üí –ú–Ω–æ–≥–æ —Ö–æ–¥—å–±—ã ‚Üí –º–µ–¥–ª–µ–Ω–Ω–æ.

üîπ –í SQL Server ‚Äî —Ç–æ –∂–µ —Å–∞–º–æ–µ:  
- ¬´–ø–æ–ª–∫–∞¬ª = **—Å—Ç—Ä–∞–Ω–∏—Ü–∞ (8 –ö–ë)**,  
- ¬´–∞–Ω—Ç—Ä–µ—Å–æ–ª–∏¬ª = **—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**,  
- ¬´—Ö–æ–¥—å–±–∞¬ª = **–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è**.

---

## 2. –ü–æ—á–µ–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –≤–æ–∑–Ω–∏–∫–∞–µ—Ç? (–∏ —ç—Ç–æ –ù–û–†–ú–ê–õ–¨–ù–û!)

| –û–ø–µ—Ä–∞—Ü–∏—è | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –∏–Ω–¥–µ–∫—Å–æ–º | –ü—Ä–∏–º–µ—Ä –∏–∑ –∂–∏–∑–Ω–∏ |
|----------|---------------------------|-----------------|
| **`INSERT` –≤ —Å–µ—Ä–µ–¥–∏–Ω—É** | –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å –Ω–µ –≤–ª–µ–∑–∞–µ—Ç –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí —Å–æ–∑–¥–∞—ë—Ç—Å—è **–Ω–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**, —Å—Å—ã–ª–∫–∞ ¬´—Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è¬ª | –í—Å—Ç–∞–≤–∫–∞ –∑–∞–ø–∏—Å–∏ –Ω–∞ 03.01 –≤ —Ç–µ—Ç—Ä–∞–¥—å ‚Üí –ø–∏—à–µ–º –Ω–∞ —Å—Ç—Ä. 42 |
| **`DELETE`** | –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Å—Ç–∞—ë—Ç—Å—è, –Ω–æ —á–∞—Å—Ç—å –º–µ—Å—Ç–∞ –ø—É—Å—Ç—É–µ—Ç ‚Üí **–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è** | –£–¥–∞–ª–∏–ª–∏ —Å—Ç—Ä–æ–∫—É ‚Üí –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ¬´–¥—ã—Ä–∞¬ª |
| **`UPDATE`, —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π —Ä–∞–∑–º–µ—Ä** | –ó–∞–ø–∏—Å—å –Ω–µ –≤–ª–µ–∑–∞–µ—Ç ‚Üí –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí **—Ä–∞–∑—Ä—ã–≤ —Ü–µ–ø–æ—á–∫–∏** | –ò—Å–ø—Ä–∞–≤–∏–ª–∏ —Å—É–º–º—É —Å 8 500 –Ω–∞ 25 000 ‚Üí –∑–∞–ø–∏—Å—å ¬´–≤—ã–ø–∞–ª–∞¬ª —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã |

> ‚úÖ **–í—ã–≤–æ–¥**:  
> ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ–∏–∑–±–µ–∂–Ω–∞ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å –ë–î,  
> ‚Äî –ù–æ –µ—ë –º–æ–∂–Ω–æ **–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å** ‚Äî –∫–∞–∫ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –æ—Å–º–æ—Ç—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è.

---

## 3. –î–≤–∞ –≤–∏–¥–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏: –≤–Ω–µ—à–Ω—è—è –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è

### üîπ –í–Ω–µ—à–Ω—è—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è (–≥–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞!)

> üí° **–ß—Ç–æ —ç—Ç–æ**: —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–Ω–¥–µ–∫—Å–∞ **—Ñ–∏–∑–∏—á–µ—Å–∫–∏ –ª–µ–∂–∞—Ç –Ω–µ –ø–æ –ø–æ—Ä—è–¥–∫—É** –Ω–∞ –¥–∏—Å–∫–µ.  
>  
> ‚Äî SQL Server —á–∏—Ç–∞–µ—Ç: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 1 ‚Üí –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 2 ‚Üí –Ω–æ –Ω–∞ –¥–∏—Å–∫–µ –∑–∞ –Ω–µ–π –∏–¥—ë—Ç —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 100 ‚Üí –¥–∏—Å–∫ –¥–µ–ª–∞–µ—Ç **–ø–æ–∏—Å–∫ –≥–æ–ª–æ–≤–∫–æ–π** ‚Üí –∑–∞–¥–µ—Ä–∂–∫–∞.  
> ‚Äî –û—Å–æ–±–µ–Ω–Ω–æ –±–æ–ª—å–Ω–æ –ø—Ä–∏ `ORDER BY`, `BETWEEN`, `JOIN`.

‚úÖ **–ö–∞–∫ –∏–∑–º–µ—Ä–∏—Ç—å**:  
- –í DMV `sys.dm_db_index_physical_stats` ‚Äî —Å—Ç–æ–ª–±–µ—Ü **`avg_fragmentation_in_percent`**,  
- **>30%** ‚Äî –∏–Ω–¥–µ–∫—Å ¬´–±–æ–ª—å–Ω–æ–π¬ª, –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å.

---

### üîπ –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è (¬´–ø—É—Å—Ç—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã¬ª)

> üí° **–ß—Ç–æ —ç—Ç–æ**: —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–ø–æ–ª–Ω–µ–Ω—ã **–º–µ–Ω–µ–µ —á–µ–º –Ω–∞ 75%**.  
>  
> ‚Äî 1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞ = 8192 –±–∞–π—Ç–∞,  
> ‚Äî –ù–æ –∑–∞–Ω—è—Ç–æ —Ç–æ–ª—å–∫–æ 3 000 –±–∞–π—Ç ‚Üí –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –ø—É—Å—Ç–æ–µ –º–µ—Å—Ç–æ,  
> ‚Äî –ß—Ç–æ–±—ã –ø—Ä–æ—á–∏—Ç–∞—Ç—å 10 000 —Å—Ç—Ä–æ–∫, SQL Server —á–∏—Ç–∞–µ—Ç **–≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ —Å—Ç—Ä–∞–Ω–∏—Ü**, —á–µ–º –º–æ–≥ –±—ã.

‚úÖ **–ö–∞–∫ –∏–∑–º–µ—Ä–∏—Ç—å**:  
- –í —Ç–æ–π –∂–µ DMV ‚Äî —Å—Ç–æ–ª–±–µ—Ü **`avg_page_space_used_in_percent`**,  
- **< 75%** ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü—ã ¬´—Ä–∞–∑–¥—É—Ç—ã¬ª, —Ç—Ä–∞—Ç–∏–º –ø–∞–º—è—Ç—å –∏ –¥–∏—Å–∫ –≤–ø—É—Å—Ç—É—é.

---

## 4. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é? DMV ‚Äî –≤–∞—à ¬´—Å–∫–∞–Ω–µ—Ä –∑–¥–æ—Ä–æ–≤—å—è¬ª

–≠—Ç–æ ‚Äî **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (DMV)** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è ¬´–ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏¬ª SQL Server.

üîß –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—Ä–æ—Å (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –∑–∞–ø–æ–º–Ω–∏—Ç–µ!):
```sql
USE –í–∞—à–∞_–ë–∞–∑–∞;  -- ‚Üê –∑–∞–º–µ–Ω–∏—Ç–µ!
GO

SELECT
    t.name AS –¢–∞–±–ª–∏—Ü–∞,
    i.name AS –ò–Ω–¥–µ–∫—Å,
    ips.index_type_desc AS –¢–∏–ø,
    -- –í–ù–ï–®–ù–Ø–Ø —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è:
    CAST(ips.avg_fragmentation_in_percent AS decimal(5,2)) AS [–§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è, %],
    -- –í–ù–£–¢–†–ï–ù–ù–Ø–Ø —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è:
    CAST(ips.avg_page_space_used_in_percent AS decimal(5,2)) AS [–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ, %],
    ips.page_count AS [–°—Ç—Ä–∞–Ω–∏—Ü]
FROM sys.dm_db_index_physical_stats(DB_ID(), NULL, NULL, NULL, 'SAMPLED') ips
JOIN sys.indexes i ON ips.object_id = i.object_id AND ips.index_id = i.index_id
JOIN sys.tables t ON i.object_id = t.object_id
WHERE ips.page_count > 100  -- –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –º–µ–ª–æ—á—å
  AND i.name IS NOT NULL;
```

üîç **–ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö**:

| –ó–Ω–∞—á–µ–Ω–∏–µ | –ß—Ç–æ –∑–Ω–∞—á–∏—Ç | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|-------------|----------|
| `–§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è, %` < 5 | –û—Ç–ª–∏—á–Ω–æ | –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º |
| 5‚Äì30% | –£–º–µ—Ä–µ–Ω–Ω–∞—è | –î–µ–ª–∞–µ–º `REORGANIZE` |
| >30% | –í—ã—Å–æ–∫–∞—è | –î–µ–ª–∞–µ–º `REBUILD` |
| `–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ, %` < 75 | –°—Ç—Ä–∞–Ω–∏—Ü—ã ¬´–ø—É—Å—Ç—ã–µ¬ª | `REBUILD` —Å `FILLFACTOR` |

> üìå **–ü–æ—á–µ–º—É `page_count > 100`?**  
> ‚Äî –£ –∏–Ω–¥–µ–∫—Å–æ–≤ –∏–∑ 5 —Å—Ç—Ä–∞–Ω–∏—Ü —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è **–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å** ‚Äî —á—Ç–µ–Ω–∏–µ 5 —Å—Ç—Ä–∞–Ω–∏—Ü –≤—Å–µ–≥–¥–∞ –±—ã—Å—Ç—Ä–æ.  
> ‚Äî –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ **–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ç–æ—Ä–º–æ–∑–∏—Ç**.

---

## 5. –ö–∞–∫ ¬´–≤—ã–ª–µ—á–∏—Ç—å¬ª –∏–Ω–¥–µ–∫—Å? –î–≤–∞ –º–µ—Ç–æ–¥–∞ ‚Äî REORGANIZE –∏ REBUILD

### üßπ `REORGANIZE` ‚Äî ¬´–≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞¬ª

> ‚ùù *¬´–ü–æ–¥–º–µ—Ç–∞–µ–º, –ø–æ–¥—Ä–∞–≤–Ω–∏–≤–∞–µ–º, —Å—à–∏–≤–∞–µ–º —Ä–∞–∑–æ—Ä–≤–∞–Ω–Ω—ã–µ –ª–∏—Å—Ç—ã ‚Äî –∏ –≤—Å—ë —ç—Ç–æ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–∫–ª–∞–¥–∞¬ª* ‚ùû

‚úÖ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:  
- –ü–µ—Ä–µ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ **–≤–Ω—É—Ç—Ä–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü**,  
- –°—à–∏–≤–∞–µ—Ç —Ä–∞–∑–æ—Ä–≤–∞–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ (¬´—Å—Ç—Ä.1 ‚Üí —Å—Ç—Ä.42¬ª ‚Üí ¬´—Å—Ç—Ä.1 ‚Üí —Å—Ç—Ä.2¬ª),  
- –ù–µ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –¥–µ—Ä–µ–≤–æ —Ü–µ–ª–∏–∫–æ–º.

‚úÖ **–ü–ª—é—Å—ã**:  
- –†–∞–±–æ—Ç–∞–µ—Ç **–æ–Ω–ª–∞–π–Ω** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –∑–∞–º–µ—á–∞—é—Ç,  
- –ú–∏–Ω–∏–º—É–º –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (—Ç–æ–ª—å–∫–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü),  
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞.

‚ùå **–ú–∏–Ω—É—Å—ã**:  
- –ù–µ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ >30% —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏,  
- –ù–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É,  
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ `REBUILD` –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–π ¬´–∑–∞–±—Ä–æ—à–µ–Ω–Ω–æ—Å—Ç–∏¬ª.

üîß **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:  
‚Äî –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é),  
‚Äî Production-–ë–î, –≥–¥–µ –Ω–µ–ª—å–∑—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É.

```sql
-- –ü—Ä–∏–º–µ—Ä:
ALTER INDEX IX_Orders_Date ON Orders REORGANIZE;
```

---

### üèóÔ∏è `REBUILD` ‚Äî ¬´–∫–∞–ø–∏—Ç–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç¬ª

> ‚ùù *¬´–°–Ω–æ—Å–∏–º —Å—Ç–∞—Ä–æ–µ –∑–¥–∞–Ω–∏–µ. –°—Ç—Ä–æ–∏–º –Ω–æ–≤–æ–µ ‚Äî –ø–æ —á–µ—Ä—Ç–µ–∂—É, —Å —á–∏—Å—Ç—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏, –±–µ–∑ —â–µ–ª–µ–π –∏ —Ç—Ä–µ—â–∏–Ω¬ª* ‚ùû

‚úÖ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:  
- –°–æ–∑–¥–∞—ë—Ç **–Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å —Å –Ω—É–ª—è**,  
- –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–π,  
- –°—Ç—Ä–∞–Ω–∏—Ü—ã ‚Äî –ø–ª–æ—Ç–Ω—ã–µ, —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–µ, –±–µ–∑ ¬´–¥—ã—Ä¬ª.

‚úÖ **–ü–ª—é—Å—ã**:  
- –ü–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω—è–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é,  
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É,  
- –ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å `FILLFACTOR` (¬´–æ—Å—Ç–∞–≤–∏—Ç—å –º–µ—Å—Ç–æ –ø–æ–¥ —Ä–æ—Å—Ç¬ª).

‚ùå **–ú–∏–Ω—É—Å—ã**:  
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî **offline** (—Ç–∞–±–ª–∏—Ü–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞),  
- –¢—Ä–µ–±—É–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ ‚âà —Ä–∞–∑–º–µ—Ä—É –∏–Ω–¥–µ–∫—Å–∞,  
- –î–æ–ª—å—à–µ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤.

üîß **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:  
‚Äî –ü—Ä–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ >30%,  
‚Äî –í –æ–∫–Ω–æ —Ç–µ—Ö–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è (–Ω–æ—á—å, –≤—ã—Ö–æ–¥–Ω—ã–µ),  
‚Äî –î–ª—è ¬´—Ç—è–∂—ë–ª—ã—Ö¬ª —Ç–∞–±–ª–∏—Ü (–º–∏–ª–ª–∏–æ–Ω—ã —Å—Ç—Ä–æ–∫).

```sql
-- –ü—Ä–∏–º–µ—Ä—ã:
ALTER INDEX IX_Orders_Date ON Orders REBUILD;

-- –° ¬´–∑–∞–ø–∞—Å–æ–º¬ª –ø–æ–¥ –±—É–¥—É—â–∏–µ UPDATE:
ALTER INDEX IX_Orders_Date ON Orders REBUILD WITH (FILLFACTOR = 80);
```

> üí° **–ß—Ç–æ —Ç–∞–∫–æ–µ `FILLFACTOR = 80`?**  
> ‚Äî –û—Å—Ç–∞–≤–∏—Ç—å 20% –º–µ—Å—Ç–∞ –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–¥ –±—É–¥—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è,  
> ‚Äî –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ç–∞–±–ª–∏—Ü —Å —á–∞—Å—Ç—ã–º–∏ `UPDATE`, –º–µ–Ω—è—é—â–∏–º–∏ —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–æ–∫–∏.

---

## 6. –ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å? –ü—Ä–æ—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞-—à–ø–∞—Ä–≥–∞–ª–∫–∞

| –°–∏—Ç—É–∞—Ü–∏—è | –ß—Ç–æ –¥–µ–ª–∞—Ç—å |
|---------|------------|
| –§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è = 8%, –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ = 90% | –ù–∏—á–µ–≥–æ ‚Äî –∏–Ω–¥–µ–∫—Å –≤ –Ω–æ—Ä–º–µ ‚úÖ |
| –§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è = 22%, –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ = 70% | `REORGANIZE` ‚Üí –ø–æ–¥–º–µ—Ç—ë–º üßπ |
| –§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è = 45%, –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ = 60% | `REBUILD` ‚Üí –ø–µ—Ä–µ—Å—Ç—Ä–æ–∏–º üèóÔ∏è |
| –§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è = 15%, –Ω–æ —Ç–∞–±–ª–∏—Ü–∞ –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞—Å—Ç—ë—Ç | `REBUILD WITH (FILLFACTOR = 85)` ‚Üí –æ—Å—Ç–∞–≤–∏–º –º–µ—Å—Ç–æ üìê |
| Production-–ë–î, –Ω–µ–ª—å–∑—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å | –¢–æ–ª—å–∫–æ `REORGANIZE` –∏–ª–∏ `REBUILD` —Å `ONLINE = ON` (Enterprise) ‚öôÔ∏è |

---

## 7. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è: –∞ –º–æ–∂–Ω–æ —Å–∞–º–æ–º—É –≤—Å—ë –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å?

‚úÖ **–î–∞! –ù–æ —É–º–Ω–æ ‚Äî –Ω–µ ¬´–≤—Å—ë –ø–æ–¥—Ä—è–¥¬ª**.

üîß –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ö–æ—Ä–æ—à–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞:
1. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç–æ–ª—å–∫–æ –∏–Ω–¥–µ–∫—Å—ã > 100 —Å—Ç—Ä–∞–Ω–∏—Ü,  
2. –ù–µ —Ç—Ä–æ–≥–∞–π –∏–Ω–¥–µ–∫—Å—ã —Å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π < 5%,  
3. –î–ª—è 5‚Äì30% ‚Üí `REORGANIZE`, –¥–ª—è >30% ‚Üí `REBUILD`,  
4. –í—ã–ø–æ–ª–Ω—è–π –Ω–æ—á—å—é (—á–µ—Ä–µ–∑ **SQL Server Agent**).

üìå –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏–∫–∏ (–º—ã –µ—ë —Ä–µ–∞–ª–∏–∑—É–µ–º –≤ –ü—Ä–∞–∫—Ç–∏–∫–µ ‚Ññ7):
```text
–î–õ–Ø –ö–ê–ñ–î–û–ì–û –∏–Ω–¥–µ–∫—Å–∞ –í –ë–î:
  –ï–°–õ–ò —Å—Ç—Ä–∞–Ω–∏—Ü > 100 –ò —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è >= 10%:
    –ï–°–õ–ò —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è >= 30%:
      –°–î–ï–õ–ê–¢–¨ REBUILD
    –ò–ù–ê–ß–ï:
      –°–î–ï–õ–ê–¢–¨ REORGANIZE
```

> üéØ **–¶–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏**: –Ω–µ ¬´–ø–æ—á–∏–Ω–∏—Ç—å –≤—Å—ë¬ª, –∞ **–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ –ë–î –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º —É—Ä–æ–≤–Ω–µ**.

---

## 8. –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏ (–ø–æ–¥—É–º–∞–π—Ç–µ –≤—Å–ª—É—Ö!)

1. **–ü–æ—á–µ–º—É –ø–æ—Å–ª–µ `DELETE` 50% —Å—Ç—Ä–æ–∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–∂–µ—Ç –≤—ã—Ä–∞—Å—Ç–∏ –¥–æ 60%?**  
   ‚Üí –ü–æ—Ç–æ–º—É —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Å—Ç–∞–ª–∏—Å—å, –Ω–æ –Ω–∞–ø–æ–ª–æ–≤–∏–Ω—É –ø—É—Å—Ç—ã–µ ‚Üí –≤–Ω–µ—à–Ω—è—è –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è.

2. **–ú–æ–∂–Ω–æ –ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å `REBUILD` –Ω–∞ —Ä–∞–±–æ—á–µ–π –ë–î, –≥–¥–µ –∏–¥—É—Ç –ø—Ä–æ–¥–∞–∂–∏?**  
   ‚Üí –í Standard Edition ‚Äî **–Ω–µ—Ç** (—Ç–∞–±–ª–∏—Ü–∞ –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è),  
   ‚Üí –í Enterprise ‚Äî –¥–∞, —Å `WITH (ONLINE = ON)`.

3. **–ó–∞—á–µ–º –æ—Å—Ç–∞–≤–ª—è—Ç—å 20% –º–µ—Å—Ç–∞ —á–µ—Ä–µ–∑ `FILLFACTOR`?**  
   ‚Üí –ß—Ç–æ–±—ã –ø—Ä–∏ `UPDATE`, —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–µ–º —Å—Ç—Ä–æ–∫—É, –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª –ø–µ—Ä–µ–Ω–æ—Å –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí –º–µ–Ω—å—à–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –±—É–¥—É—â–µ–º.

4. **–ü–æ—á–µ–º—É –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞ –∏–∑ 50 —Å—Ç—Ä–∞–Ω–∏—Ü —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è 50% ‚Äî –Ω–µ —Å—Ç—Ä–∞—à–Ω–∞?**  
   ‚Üí –ü–æ—Ç–æ–º—É —á—Ç–æ 50 —Å—Ç—Ä–∞–Ω–∏—Ü = 400 –ö–ë ‚Üí —á–∏—Ç–∞–µ—Ç—Å—è –∑–∞ 1‚Äì2 –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–∏—Å–∫–∞ ‚Üí —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É 25 –∏ 50 —á—Ç–µ–Ω–∏—è–º–∏ ‚Äî –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã.

---

## 9. –ü–æ–¥–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤ ‚Äî 5 –≥–ª–∞–≤–Ω—ã—Ö –º—ã—Å–ª–µ–π

1. **–§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞**, –Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞ ‚Äî –∫–∞–∫ –∏–∑–Ω–æ—Å —à–∏–Ω –∞–≤—Ç–æ–º–æ–±–∏–ª—è.  
2. **–ù–µ –≤—Å–µ –∏–Ω–¥–µ–∫—Å—ã –Ω—É–∂–Ω–æ —á–∏–Ω–∏—Ç—å** ‚Äî —Ç–æ–ª—å–∫–æ ¬´—Ç—è–∂—ë–ª—ã–µ¬ª (>100 —Å—Ç—Ä–∞–Ω–∏—Ü) –∏ ¬´–±–æ–ª—å–Ω—ã–µ¬ª (>10% —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏).  
3. **`REORGANIZE` ‚Äî –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏**, `REBUILD` ‚Äî –¥–ª—è –ª–µ—á–µ–Ω–∏—è.  
4. **DMV ‚Äî –≤–∞—à ¬´—Å–∫–∞–Ω–µ—Ä¬ª**, –∞ –Ω–µ –≤–æ–ª—à–µ–±–Ω–∞—è —Ç–∞–±–ª–µ—Ç–∫–∞ ‚Äî —Å–º–æ—Ç—Ä–∏—Ç–µ —á–∏—Å–ª–∞, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ ¬´–µ—Å—Ç—å/–Ω–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏¬ª.  
5. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è ‚Äî —Ö–æ—Ä–æ—à–æ, –Ω–æ —Å –≥–æ–ª–æ–≤–æ–π**: —É–º–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –ª—É—á—à–µ ¬´–≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ¬ª.

---

üîú **–î–∞–ª–µ–µ ‚Äî –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ7**:  
–í—ã:  
- –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ ¬´–∑–∞–ø–æ—Ä—Ç–∏—Ç–µ¬ª –∏–Ω–¥–µ–∫—Å (—É–¥–∞–ª–µ–Ω–∏—è + –≤—Å—Ç–∞–≤–∫–∏),  
- –∏–∑–º–µ—Ä–∏—Ç–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é —á–µ—Ä–µ–∑ DMV,  
- —Å–¥–µ–ª–∞–µ—Ç–µ `REORGANIZE` –∏ `REBUILD`,  
- —Å—Ä–∞–≤–Ω–∏—Ç–µ **–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è** –¥–æ/–ø–æ—Å–ª–µ ‚Äî –∏ —É–≤–∏–¥–∏—Ç–µ, **–∫–∞–∫ 132 —á—Ç–µ–Ω–∏–π –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ 24**.

---

üìé **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –ö–æ–º–∞–Ω–¥—ã-–ø–æ–º–æ—â–Ω–∏–∫–∏**

| –ó–∞–¥–∞—á–∞ | –ö–æ–º–∞–Ω–¥–∞ |
|-------|---------|
| –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é | `SELECT * FROM sys.dm_db_index_physical_stats(...)` |
| ¬´–õ—ë–≥–∫–∞—è¬ª –¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è | `ALTER INDEX IX_Name ON Table REORGANIZE;` |
| ¬´–ü–æ–ª–Ω–∞—è¬ª –¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è | `ALTER INDEX IX_Name ON Table REBUILD;` |
| –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ—á—å—é | –°–æ–∑–¥–∞—Ç—å **–ó–∞–¥–∞–Ω–∏–µ (Job)** –≤ SQL Server Agent |

---

üìú **–õ–∏—Ü–µ–Ω–∑–∏—è**: [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/)  
üë®‚Äçüè´ **–ê–≤—Ç–æ—Ä**: –†—É—Å–ª–∞–Ω –†–∏–Ω–∞—Ç–æ–≤–∏—á –°–∞—Ñ–∏—É–ª–∏–Ω  
üìÖ **–î–∞—Ç–∞**: 14.11.2025  

---

### üîô üìö üîú –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫—É—Ä—Å—É

| [–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/PR6.MD) | &nbsp; | [–°–ª–µ–¥—É—é—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/PR7.MD) |
|:--------------------------------------:|:------:|:-------------------------------------:|
| üè† [–ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ6](../LESSONS/PR6.MD) | üìñ [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](../README.MD) | üíª [–ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ7](../LESSONS/PR7.MD) |

---
