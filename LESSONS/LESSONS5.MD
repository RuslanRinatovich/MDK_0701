
# –õ–µ–∫—Ü–∏—è 5: –û–±—ä–µ–∫—Ç—ã –ë–î –≤ MS SQL Server ‚Äî —Å –ø–æ–∑–∏—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞**: –ú–î–ö.07.01. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö  
**–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è**: –°—Ç—É–¥–µ–Ω—Ç—ã –°–ü–û  
**–¢–µ–º–∞**: –û–±—ä–µ–∫—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: —Å—Ö–µ–º—ã, —Ç–∞–±–ª–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã ‚Äî –≤–∑–≥–ª—è–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞  
**–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 2 —á–∞—Å–∞ (1 –ø–∞—Ä–∞)

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
- [–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ë–î?](#—á—Ç–æ-–¥–æ–ª–∂–µ–Ω-–∑–Ω–∞—Ç—å-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä-–æ-—Å—Ç—Ä—É–∫—Ç—É—Ä–µ-–±–¥)
- [–°—Ö–µ–º—ã: –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è](#—Å—Ö–µ–º—ã-–ª–æ–≥–∏—á–µ—Å–∫–∏–µ-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã-–¥–ª—è-—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
- [–¢–∞–±–ª–∏—Ü—ã: –Ω–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ–º, –∞ —É–ø—Ä–∞–≤–ª—è–µ–º](#—Ç–∞–±–ª–∏—Ü—ã-–Ω–µ-–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ–º-–∞-—É–ø—Ä–∞–≤–ª—è–µ–º)
- [–ò–Ω–¥–µ–∫—Å—ã: –ø–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞–∑–±–æ—Ä –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞](#–∏–Ω–¥–µ–∫—Å—ã-–ø–æ–¥—Ä–æ–±–Ω—ã–π-—Ä–∞–∑–±–æ—Ä-–¥–ª—è-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
  - [–ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω–¥–µ–∫—Å?](#—á—Ç–æ-—Ç–∞–∫–æ–µ-–∏–Ω–¥–µ–∫—Å)
  - [–ö–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å (Clustered Index)](#–∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π-–∏–Ω–¥–µ–∫—Å-clustered-index)
  - [–ù–µ–∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å (Nonclustered Index)](#–Ω–µ–∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π-–∏–Ω–¥–µ–∫—Å-nonclustered-index)
  - [–ò–Ω–¥–µ–∫—Å—ã –ø–æ–∫—Ä—ã—Ç–∏—è (Covering Indexes)](#–∏–Ω–¥–µ–∫—Å—ã-–ø–æ–∫—Ä—ã—Ç–∏—è-covering-indexes)
  - [–§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤](#—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è-–∏–Ω–¥–µ–∫—Å–æ–≤)
  - [–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã?](#–∫–æ–≥–¥–∞-—Å–æ–∑–¥–∞–≤–∞—Ç—å-–∏–Ω–¥–µ–∫—Å—ã)
- [–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è ‚Äî –≥–ª–∞–∑–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞](#—Å–∏—Å—Ç–µ–º–Ω—ã–µ-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è-‚Äî-–≥–ª–∞–∑–∞-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
- [–í—ã–≤–æ–¥—ã](#–≤—ã–≤–æ–¥—ã)
- [–í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏](#–≤–æ–ø—Ä–æ—Å—ã-–¥–ª—è-—Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏)

## –í–≤–µ–¥–µ–Ω–∏–µ

–ù–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–Ω—è—Ç–∏—è—Ö –≤—ã –Ω–∞—É—á–∏–ª–∏—Å—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å MS SQL Server, —É–ø—Ä–∞–≤–ª—è—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.  
–¢–µ–ø–µ—Ä—å –Ω–∞—Å—Ç–∞–ª–æ –≤—Ä–µ–º—è —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, **—á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** ‚Äî –Ω–µ –∫–∞–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –∞ –∫–∞–∫ **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**.

> üí° **–í–∞–∂–Ω–æ**: –í—ã **–Ω–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ—Ç–µ** —Ç–∞–±–ª–∏—Ü—ã –∏ —Å–≤—è–∑–∏. –í—ã **—É–ø—Ä–∞–≤–ª—è–µ—Ç–µ** —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π: —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ –¥–æ—Å—Ç—É–ø –∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ.

## –ß—Ç–æ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ë–î?

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–æ –æ–Ω **–æ–±—è–∑–∞–Ω –ø–æ–Ω–∏–º–∞—Ç—å**:
- –ö–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –µ—Å—Ç—å –≤ –ë–î,
- –ö–∞–∫ –æ–Ω–∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –ª–æ–≥–∏—á–µ—Å–∫–∏ (—Å—Ö–µ–º—ã),
- –ö–∞–∫ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏ (—Ñ–∞–π–ª—ã, –∏–Ω–¥–µ–∫—Å—ã),
- –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∏—Ö —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.

–≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞,
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –Ω–∏–∑–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏,
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è,
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–±–æ–µ–≤.

## –°—Ö–µ–º—ã: –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–°—Ö–µ–º–∞ (Schema)** ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω –≤–Ω—É—Ç—Ä–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–æ–µ –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç—ã.

- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ —Å—Ö–µ–º–µ `dbo` (database owner).
- –ü—Ä–∏–º–µ—Ä: `dbo.Students`, `hr.Employees`, `reports.Sales`.

### –ó–∞—á–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å—Ö–µ–º—ã?
1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º**: –º–æ–∂–Ω–æ –¥–∞—Ç—å –ø—Ä–∞–≤–∞ **–Ω–∞ –≤—Å—é —Å—Ö–µ–º—É**:
   ```sql
   GRANT SELECT ON SCHEMA::hr TO analyst_user;
   ```
2. **–ò–∑–æ–ª—è—Ü–∏—è**: –æ–±—ä–µ–∫—Ç—ã –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ö–µ–º–∞—Ö –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç, –¥–∞–∂–µ –µ—Å–ª–∏ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∏–º–µ–Ω–∞.
3. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è**: —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã —Å—Ö–µ–º—ã ‚Äî –ø—Ä–æ—â–µ, —á–µ–º –ø–æ –æ–¥–Ω–æ–º—É.

> üìå –í –ë–î `University` –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å—Ö–µ–º–µ `dbo`.

## –¢–∞–±–ª–∏—Ü—ã: –Ω–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ–º, –∞ —É–ø—Ä–∞–≤–ª—è–µ–º

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä **–Ω–µ –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–∏–ø—ã –ø–æ–ª–µ–π** –∏ **–Ω–µ —Å—Ç—Ä–æ–∏—Ç —Å–≤—è–∑–∏**, –Ω–æ:
- –ú–æ–∂–µ—Ç **–¥–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª–±–µ—Ü** –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ò–°:
  ```sql
  ALTER TABLE dbo.Students ADD Email nvarchar(100);
  ```
- –ú–æ–∂–µ—Ç **—É–¥–∞–ª–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É** –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ:
  ```sql
  DROP TABLE dbo.TempLogs;
  ```
- –î–æ–ª–∂–µ–Ω –ø–æ–Ω–∏–º–∞—Ç—å, **–≥–¥–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ** (—Ñ–∞–π–ª—ã `.mdf`).

> üí° –¢–∞–±–ª–∏—Ü–∞ = –¥–∞–Ω–Ω—ã–µ + —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + –∏–Ω–¥–µ–∫—Å—ã + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.  
> –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç **–≤—Å–µ–º —ç—Ç–∏–º –∫–æ–º–ø–ª–µ–∫—Å–æ–º**.

## –ò–Ω–¥–µ–∫—Å—ã: –ø–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞–∑–±–æ—Ä –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω–¥–µ–∫—Å?

–ò–Ω–¥–µ–∫—Å ‚Äî —ç—Ç–æ **–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**, –∫–æ—Ç–æ—Ä–∞—è —É—Å–∫–æ—Ä—è–µ—Ç –ø–æ–∏—Å–∫ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ.  
–ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞ SQL Server –≤—ã–ø–æ–ª–Ω—è–µ—Ç **–ø–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã (Table Scan)** ‚Äî —á–∏—Ç–∞–µ—Ç –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É.  
–° –∏–Ω–¥–µ–∫—Å–æ–º ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç **–ø–æ–∏—Å–∫ –ø–æ –¥–µ—Ä–µ–≤—É (Index Seek)** ‚Äî –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç —Å—Ä–∞–∑—É –∫ –Ω—É–∂–Ω—ã–º —Å—Ç—Ä–æ–∫–∞–º.

> üìä –ü—Ä–∏–º–µ—Ä:  
> –¢–∞–±–ª–∏—Ü–∞ –∏–∑ 1 –º–ª–Ω —Å—Ç—Ä–æ–∫.  
> –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞: 1 000 000 –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è.  
> –° –∏–Ω–¥–µ–∫—Å–æ–º: ~20 –æ–ø–µ—Ä–∞—Ü–∏–π (–≥–ª—É–±–∏–Ω–∞ B-–¥–µ—Ä–µ–≤–∞).

### –ö–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å (Clustered Index)

- **–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫** –≤ —Ç–∞–±–ª–∏—Ü–µ.
- –í —Ç–∞–±–ª–∏—Ü–µ –º–æ–∂–µ—Ç –±—ã—Ç—å **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω** –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å.
- –û–±—ã—á–Ω–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ **PRIMARY KEY**.
- –•—Ä–∞–Ω–∏—Ç **–≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã** –≤ –ª–∏—Å—Ç—å—è—Ö –¥–µ—Ä–µ–≤–∞.

> üí° –ï—Å–ª–∏ —É —Ç–∞–±–ª–∏—Ü—ã –Ω–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ ‚Äî –æ–Ω–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **¬´–∫—É—á–∞¬ª (heap)**.  
> –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, —á—Ç–æ –∑–∞–º–µ–¥–ª—è–µ—Ç –ø–æ–∏—Å–∫.

### –ù–µ–∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å (Nonclustered Index)

- –•—Ä–∞–Ω–∏—Ç—Å—è **–æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –¥–∞–Ω–Ω—ã—Ö**.
- –í –ª–∏—Å—Ç—å—è—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç **–∫–ª—é—á –∏–Ω–¥–µ–∫—Å–∞ + —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä–æ–∫—É**.
- –ï—Å–ª–∏ –µ—Å—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å ‚Äî —É–∫–∞–∑–∞—Ç–µ–ª—å = **–∫–ª—é—á –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞**.  
  –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —É–∫–∞–∑–∞—Ç–µ–ª—å = **ROWID (–∞–¥—Ä–µ—Å —Å—Ç—Ä–æ–∫–∏ –≤ –∫—É—á–µ)**.
- –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å **–¥–æ 999** –Ω–µ–∫–ª–∞—Å—Ç–µ—Ä–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ –æ–¥–Ω—É —Ç–∞–±–ª–∏—Ü—É.

> ‚ö†Ô∏è **–ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã**:  
> –ö–∞–∂–¥—ã–π –∏–Ω–¥–µ–∫—Å –∑–∞–º–µ–¥–ª—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ `INSERT`, `UPDATE`, `DELETE`, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏–Ω–¥–µ–∫—Å —Ç–æ–∂–µ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å.

### –ò–Ω–¥–µ–∫—Å—ã –ø–æ–∫—Ä—ã—Ç–∏—è (Covering Indexes)

–≠—Ç–æ –æ—Å–æ–±—ã–π –≤–∏–¥ –Ω–µ–∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞, –∫–æ—Ç–æ—Ä—ã–π **–≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Å—Ç–æ–ª–±—Ü—ã, –Ω—É–∂–Ω—ã–µ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞**.

–ü—Ä–∏–º–µ—Ä:
```sql
-- –ó–∞–ø—Ä–æ—Å
SELECT StudentID, Grade FROM Grades WHERE CourseID = 1;

-- –ò–Ω–¥–µ–∫—Å –ø–æ–∫—Ä—ã—Ç–∏—è
CREATE NONCLUSTERED INDEX IX_Grades_Covering 
ON Grades (CourseID) 
INCLUDE (StudentID, Grade);
```

> ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: SQL Server **–Ω–µ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Ç–∞–±–ª–∏—Ü–µ**, —Ç–æ–ª—å–∫–æ –∫ –∏–Ω–¥–µ–∫—Å—É ‚Üí –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å.

### –§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤

–°–æ –≤—Ä–µ–º–µ–Ω–µ–º –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö `INSERT`/`UPDATE`/`DELETE` –∏–Ω–¥–µ–∫—Å—ã **—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è**:
- **–í–Ω–µ—à–Ω—è—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è**: –ª–æ–≥–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–µ –ø–æ–¥—Ä—è–¥ –Ω–∞ –¥–∏—Å–∫–µ.
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è**: —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é.

> üìâ –§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è —Å–Ω–∏–∂–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å!

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä?**
- –†–µ–≥—É–ª—è—Ä–Ω–æ **–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é**:
  ```sql
  SELECT 
      OBJECT_NAME(object_id) AS TableName,
      index_type_desc,
      avg_fragmentation_in_percent
  FROM sys.dm_db_index_physical_stats(DB_ID(), NULL, NULL, NULL, 'LIMITED')
  WHERE avg_fragmentation_in_percent > 10;
  ```
- **–ü–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç** —Å–∏–ª—å–Ω–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã (`>30%`):
  ```sql
  ALTER INDEX IX_Students_LastName ON Students REBUILD;
  ```
- **–†–µ–æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç** —Å–ª–∞–±–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (`10‚Äì30%`):
  ```sql
  ALTER INDEX IX_Students_LastName ON Students REORGANIZE;
  ```

### –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã?

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**:
- –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã **–ø–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**, –∞ –Ω–µ ¬´–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π¬ª.
- –ò–Ω–¥–µ–∫—Å –ø–æ–ª–µ–∑–µ–Ω, –µ—Å–ª–∏:
  - –ü–æ–ª–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `WHERE`, `JOIN`, `ORDER BY`.
  - –í—ã–±–æ—Ä–∫–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç **–º–µ–Ω–µ–µ 10%** –æ—Ç —Ç–∞–±–ª–∏—Ü—ã.
- –ò–∑–±–µ–≥–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞:
  - –û—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö (<1000 —Å—Ç—Ä–æ–∫).
  - –ü–æ–ª—è—Ö —Å –Ω–∏–∑–∫–æ–π —Å–µ–ª–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `–ü–æ–ª` ‚Äî –≤—Å–µ–≥–æ 2 –∑–Ω–∞—á–µ–Ω–∏—è).

> üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Maintenance Plans** –∏–ª–∏ **SQL Server Agent** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω–¥–µ–∫—Å–æ–≤.

## –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è ‚Äî –≥–ª–∞–∑–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–ß—Ç–æ–±—ã ¬´—É–≤–∏–¥–µ—Ç—å¬ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è:

```sql
-- –í—Å–µ —Å—Ö–µ–º—ã
SELECT name FROM sys.schemas;

-- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—Ö–µ–º—ã
SELECT s.name AS SchemaName, t.name AS TableName
FROM sys.tables t
JOIN sys.schemas s ON t.schema_id = s.schema_id;

-- –í—Å–µ –∏–Ω–¥–µ–∫—Å—ã
SELECT 
    OBJECT_NAME(object_id) AS TableName,
    name AS IndexName,
    type_desc,
    is_unique,
    is_primary_key
FROM sys.indexes;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤
SELECT 
    OBJECT_NAME(s.object_id) AS TableName,
    i.name AS IndexName,
    s.user_seeks,
    s.user_scans,
    s.last_user_seek
FROM sys.dm_db_index_usage_stats s
JOIN sys.indexes i ON s.object_id = i.object_id AND s.index_id = i.index_id
WHERE s.database_id = DB_ID();
```

–≠—Ç–∏ –∑–∞–ø—Ä–æ—Å—ã ‚Äî –æ—Å–Ω–æ–≤–∞ **–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**.

## –í—ã–≤–æ–¥—ã

- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä **—Ä–∞–±–æ—Ç–∞–µ—Ç —Å —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π**, –∞ –Ω–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ—Ç –µ—ë.
- **–°—Ö–µ–º—ã** ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ª–æ–≥–∏—á–µ—Å–∫–æ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º.
- **–ò–Ω–¥–µ–∫—Å—ã** ‚Äî –∫–ª—é—á –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –Ω–æ —Ç—Ä–µ–±—É—é—Ç —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è.
- **–§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äî —Å–∫—Ä—ã—Ç–∞—è —É–≥—Ä–æ–∑–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ —É—Å—Ç—Ä–∞–Ω—è—Ç—å.
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è** ‚Äî –≥–ª–∞–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ë–î.

## –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏

1. –ß–µ–º –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –Ω–µ–∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–≥–æ?
2. –ü–æ—á–µ–º—É —Ç–∞–±–ª–∏—Ü–∞ –±–µ–∑ –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´–∫—É—á–∞¬ª?
3. –ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω–¥–µ–∫—Å –ø–æ–∫—Ä—ã—Ç–∏—è –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?
4. –ü—Ä–∏ –∫–∞–∫–æ–π —Å—Ç–µ–ø–µ–Ω–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å–ª–µ–¥—É–µ—Ç –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å?
5. –ü–æ—á–µ–º—É —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–æ–≤ –º–æ–∂–µ—Ç –Ω–∞–≤—Ä–µ–¥–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏?
6. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –∏–Ω–¥–µ–∫—Å –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö?

–õ–∏—Ü–µ–Ω–∑–∏—è: [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/)  
–ê–≤—Ç–æ—Ä: –†—É—Å–ª–∞–Ω –†–∏–Ω–∞—Ç–æ–≤–∏—á –°–∞—Ñ–∏—É–ª–∏–Ω  
–î–∞—Ç–∞: 20.10.2025
