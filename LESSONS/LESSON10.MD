### üîô üìö üîú –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫—É—Ä—Å—É

| [–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/PR8.MD) | &nbsp; | [–°–ª–µ–¥—É—é—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/PR9.MD) |
|:--------------------------------------:|:------:|:-------------------------------------:|
| üè† [–ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ8](../LESSONS/PR8.MD) | üìñ [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](../README.MD) | üíª [–ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ9](../LESSONS/PR9.MD) |

---

# üéì **–õ–µ–∫—Ü–∏—è 9. –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è: sys.tables, sys.schemas, sys.indexes**

>‚è±Ô∏è **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 90 –º–∏–Ω—É—Ç

> üéØ **–¶–µ–ª—å –ª–µ–∫—Ü–∏–∏:**
> –ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–∑ ¬´—Å—Ç—Ä–∞—à–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ —Ç–∞–±–ª–∏—Ü¬ª –≤ –≥–ª–∞–≤–Ω—ã–π —à–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π –Ω–æ–∂ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞. –ü–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã: ¬´–ß—Ç–æ —É –º–µ–Ω—è –≤ –ë–î?¬ª, ¬´–ö—Ç–æ —á–µ–º –≤–ª–∞–¥–µ–µ—Ç?¬ª, ¬´–ì–¥–µ —á—Ç–æ –ª–µ–∂–∏—Ç?¬ª. –ó–∞–ª–æ–∂–∏—Ç—å –æ—Å–Ω–æ–≤—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä—É—Ç–∏–Ω–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

#### **üìñ –ß–∞—Å—Ç—å 0. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –∑–∞–ø–æ–º–Ω–∏—Ç–µ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞**

> **üí° –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è ‚Äî —ç—Ç–æ ¬´–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è¬ª –≤–∞—à–∏–º SQL Server.**
>
> –≠—Ç–æ –Ω–µ –º–∞–≥–∏—è, –∞ –æ–±—ã—á–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö SQL Server —Ö—Ä–∞–Ω–∏—Ç **–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** ‚Äî —Ç–æ –µ—Å—Ç—å ¬´–¥–∞–Ω–Ω—ã–µ –æ –¥–∞–Ω–Ω—ã—Ö¬ª:
> *   –ö–∞–∫–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?
> *   –ö–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ —ç—Ç–æ–π –ë–î?
> *   –ö–∞–∫–∏–µ —É –Ω–∏—Ö —Å—Ç–æ–ª–±—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã, –ø—Ä–∞–≤–∞?
>
> –í—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä, –µ—Å–ª–∏ –Ω–µ —É–º–µ–µ—Ç–µ —Å –Ω–∏–º–∏ —Ä–∞–±–æ—Ç–∞—Ç—å.

#### **1. –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è? –¢—Ä–∏ –∫–∏—Ç–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**

**üîπ –§–æ—Ä–º–∞–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (–¥–ª—è –∫–æ–Ω—Å–ø–µ–∫—Ç–∞):**
–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (System Views) ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö `master` –∏ –≤ –∫–∞–∂–¥–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –ë–î, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ –¥–æ—Å—Ç—É–ø –∫ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º SQL Server –≤ –≤–∏–¥–µ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü.

**üîπ –ü—Ä–æ—Å—Ç–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (–¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è):**
–≠—Ç–æ ¬´—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏¬ª, –∫–æ—Ç–æ—Ä—ã–µ SQL Server –≤–µ–¥—ë—Ç —Å–∞–º –æ —Å–µ–±–µ.

*   **`sys.databases`** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ ¬´–ö–∞–∫–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å –Ω–∞ —ç—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–µ¬ª.
*   **`sys.tables`** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ ¬´–ö–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –µ—Å—Ç—å –≤ —ç—Ç–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö¬ª.
*   **`sys.indexes`** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ ¬´–ö–∞–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –µ—Å—Ç—å —É –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã¬ª.

‚úÖ **–ü—Ä–∞–≤–∏–ª–æ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:** –õ—é–±–æ–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Å–æ–∑–¥–∞—ë—Ç–µ —á–µ—Ä–µ–∑ SSMS (—â—ë–ª–∫–∞—è –º—ã—à–∫–æ–π), —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è—Ö. **–í—Å—ë, —á—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ GUI, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏ –∑–∞–ø—Ä–æ—Å–æ–º.**

#### **2. –¢—Ä–∏ —É—Ä–æ–≤–Ω—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π**

–í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, –≥–¥–µ —á—Ç–æ –∏—Å–∫–∞—Ç—å:

| –£—Ä–æ–≤–µ–Ω—å | –ü—Ä–µ—Ñ–∏–∫—Å | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | –ü—Ä–∏–º–µ—Ä | –ß—Ç–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç |
| :--- | :--- | :--- | :--- | :--- |
| **1. –°–µ—Ä–≤–µ—Ä–Ω—ã–π** | `sys.` | `master` | `sys.databases` | –í—Å—ë, —á—Ç–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞: –ë–î, –ª–æ–≥–∏–Ω—ã, –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ |
| **2. –ë–∞–∑–æ–≤—ã–π** | `sys.` | *–õ—é–±–∞—è –ë–î* | `sys.tables` | –û–±—ä–µ–∫—Ç—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ë–î: —Ç–∞–±–ª–∏—Ü—ã, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, –∏–Ω–¥–µ–∫—Å—ã |
| **3. –£—Å—Ç–∞—Ä–µ–≤—à–∏–π** | `sys.` | `master` | `sys.sysdatabases` | –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (–∏–∑ SQL 2000). **–ò–∑–±–µ–≥–∞–π—Ç–µ!** |

üí° **–ö–ª—é—á–µ–≤–∞—è –º—ã—Å–ª—å:** –ö–æ–≥–¥–∞ –≤—ã –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—å –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –ë–î (–Ω–∞–ø—Ä–∏–º–µ—Ä, `USE StatsLab;`), –≤—ã –≤–∏–¥–∏—Ç–µ –≤ `sys.tables` —Ç–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü—ã —ç—Ç–æ–π –ë–î.

#### **3. –ì–ª–∞–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–¢–û–ü-10)**

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–∞–º—ã–µ –ø–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

**üìä 1. `sys.tables` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∞–±–ª–∏—Ü**

```sql
SELECT 
    name AS TableName,
    object_id AS ObjectID,
    schema_id AS SchemaID,
    type_desc AS ObjectType,
    create_date AS CreateDate,
    modify_date AS ModifyDate
FROM sys.tables;
```

**üí° –ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
*   `modify_date` ‚Äî –µ—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ –º–µ–Ω—è–ª–∞—Å—å 3 –≥–æ–¥–∞, –≤–æ–∑–º–æ–∂–Ω–æ, –µ—ë –º–æ–∂–Ω–æ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å.
*   `object_id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –æ–±—ä–µ–∫—Ç–∞, –∫–ª—é—á –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

**üìä 2. `sys.schemas` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ö–µ–º**

```sql
SELECT 
    name AS SchemaName,
    schema_id AS SchemaID,
    principal_id AS OwnerID
FROM sys.schemas;
```

**üí° –ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
*   –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É `sys.tables.schema_id` –∏ `sys.schemas.schema_id` ‚Äî —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –≤ –∫–∞–∫–æ–π —Å—Ö–µ–º–µ –ª–µ–∂–∏—Ç —Ç–∞–±–ª–∏—Ü–∞.

**üìä 3. `sys.indexes` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∏–Ω–¥–µ–∫—Å–æ–≤**

```sql
SELECT 
    object_id AS TableObjectID,
    name AS IndexName,
    index_id AS IndexID,
    type_desc AS IndexType -- CLUSTERED, NONCLUSTERED, HEAP
FROM sys.indexes;
```

**üí° –ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
*   `index_id = 0` –∏–ª–∏ `type_desc = 'HEAP'` ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –±–µ–∑ –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ (–∫–∞–Ω–¥–∏–¥–∞—Ç –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ PK).
*   `index_id = 1` ‚Äî –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å.

**üìä 4. `sys.columns` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç–æ–ª–±—Ü–æ–≤**

```sql
SELECT 
    object_id AS TableObjectID,
    name AS ColumnName,
    column_id AS ColumnID,
    system_type_id AS TypeID,
    max_length AS MaxLength,
    is_nullable AS IsNullable
FROM sys.columns;
```

**üí° –ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
*   `system_type_id` ‚Äî ID —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö (–Ω—É–∂–Ω–æ —Å–æ–µ–¥–∏–Ω—è—Ç—å —Å `sys.types`).
*   `max_length` ‚Äî –¥–ª—è `varchar` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É.

**üìä 5. `sys.types` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö**

```sql
SELECT 
    name AS TypeName,
    system_type_id AS SystemTypeID,
    user_type_id AS UserTypeID
FROM sys.types;
```

#### **4. –°–æ–µ–¥–∏–Ω—è–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è: –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ `object_id` –∫ –ø–æ–Ω—è—Ç–Ω—ã–º –∏–º–µ–Ω–∞–º**

–í–æ—Ç –≥–¥–µ –º–∞–≥–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Ä—É—Ç–∏–Ω—É. –û–¥–Ω–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–∏–µ —á–µ—Ä–µ–∑ ID.

**üîπ –ó–∞–¥–∞—á–∞: –í—ã–≤–µ—Å—Ç–∏ –∫—Ä–∞—Å–∏–≤—ã–π –æ—Ç—á—ë—Ç ¬´–¢–∞–±–ª–∏—Ü–∞ -> –°—Ö–µ–º–∞ -> –°—Ç–æ–ª–±—Ü—ã¬ª**

```sql
SELECT 
    SCHEMA_NAME(t.schema_id) AS SchemaName, -- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º ID –≤ –∏–º—è
    t.name AS TableName,
    c.name AS ColumnName,
    ty.name AS DataType,
    c.max_length,
    c.is_nullable
FROM sys.tables t
INNER JOIN sys.columns c ON t.object_id = c.object_id
INNER JOIN sys.types ty ON c.system_type_id = ty.system_type_id
ORDER BY SchemaName, TableName, c.column_id;
```

**üí° –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
*   `SCHEMA_NAME(schema_id)` ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç ID —Å—Ö–µ–º—ã –≤ –µ—ë –∏–º—è.
*   `OBJECT_NAME(object_id)` ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç ID –æ–±—ä–µ–∫—Ç–∞ –≤ –µ–≥–æ –∏–º—è.

**üîπ –ó–∞–¥–∞—á–∞: –ù–∞–π—Ç–∏ –≤—Å–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `Orders`**

```sql
SELECT 
    t.name AS TableName,
    i.name AS IndexName,
    i.type_desc AS IndexType,
    i.is_unique AS IsUnique
FROM sys.tables t
INNER JOIN sys.indexes i ON t.object_id = i.object_id
WHERE t.name = 'Orders';
```

#### **5. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**

**üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –Ω–∞—Å–ª–µ–¥–∏—è**
¬´–ú–Ω–µ –¥–æ—Å—Ç–∞–ª—Å—è —Å–µ—Ä–≤–µ—Ä, —è –Ω–µ –∑–Ω–∞—é, —á—Ç–æ –Ω–∞ –Ω—ë–º –µ—Å—Ç—å¬ª.

```sql
-- –°–∫–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü –≤ –∫–∞–∂–¥–æ–π —Å—Ö–µ–º–µ?
SELECT 
    SCHEMA_NAME(schema_id) AS SchemaName,
    COUNT(*) AS TableCount
FROM sys.tables
GROUP BY SCHEMA_NAME(schema_id)
ORDER BY TableCount DESC;
```

**üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–∏—Å–∫ —à–∏—Ä–æ–∫–∏—Ö —Ç–∞–±–ª–∏—Ü**
¬´–ö–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∑–∞–Ω–∏–º–∞—é—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –º–µ—Å—Ç–∞?¬ª (–æ—Å–Ω–æ–≤–∞ –¥–ª—è –ü—Ä–∞–∫—Ç–∏–∫–∏ ‚Ññ13)

```sql
-- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –∏—Ö –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä (—Ä—è–¥–æ–≤)
SELECT 
    t.name AS TableName,
    p.rows AS RowCounts
FROM sys.tables t
INNER JOIN sys.partitions p ON t.object_id = p.object_id
WHERE p.index_id IN (0,1) -- –•—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—É—á–∏ –∏–ª–∏ –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
ORDER BY p.rows DESC;
```

**üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
¬´–ö—Ç–æ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–∞–∫–∏–º —Å—Ö–µ–º–∞–º?¬ª

```sql
-- –ö–∞–∫–∏–µ —Ä–æ–ª–∏ –µ—Å—Ç—å –≤ –ë–î –∏ –∫–∞–∫–∏–µ –ø—Ä–∞–≤–∞ —É –Ω–∏—Ö –Ω–∞ —Å—Ö–µ–º—ã?
SELECT 
    r.name AS RoleName,
    p.permission_name AS Permission,
    p.state_desc AS State,
    s.name AS SchemaName
FROM sys.database_principals r
INNER JOIN sys.database_permissions p ON r.principal_id = p.grantee_principal_id
INNER JOIN sys.schemas s ON p.major_id = s.schema_id
WHERE p.class_desc = 'SCHEMA';
```

#### **6. –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å –æ—Ç–≤–µ—Ç–∞–º–∏)**

1.  **–í –∫–∞–∫–æ–π –ë–î –Ω–∞—Ö–æ–¥–∏—Ç—Å—è `sys.tables`?**
    ‚Üí –í –∫–∞–∂–¥–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –ë–î. –í `master` ‚Äî —Ç–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã.

2.  **–ö–∞–∫ –Ω–∞–π—Ç–∏ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –≤ —Å—Ö–µ–º–µ `sales`?**
    ‚Üí `SELECT * FROM sys.tables WHERE schema_id = SCHEMA_ID('sales');`

3.  **–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç `index_id = 0` –≤ `sys.indexes`?**
    ‚Üí –≠—Ç–æ –∫—É—á–∞ (HEAP), —Ç–∞–±–ª–∏—Ü–∞ –±–µ–∑ –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞.

4.  **–ö–∞–∫ —Å–æ–µ–¥–∏–Ω–∏—Ç—å `sys.tables` –∏ `sys.columns`?**
    ‚Üí –ü–æ `object_id`.

5.  **–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `SCHEMA_NAME()`?**
    ‚Üí –ß—Ç–æ–±—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —á–∏—Å–ª–æ–≤–æ–π `schema_id` –≤ —á–∏—Ç–∞–µ–º–æ–µ –∏–º—è —Å—Ö–µ–º—ã.

#### **7. –ü–æ–¥–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤ ‚Äî 5 –∫–ª—é—á–µ–≤—ã—Ö –º—ã—Å–ª–µ–π**

1.  **–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è ‚Äî —ç—Ç–æ ¬´–æ–∫–Ω–æ¬ª –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ.** –ë–µ–∑ –Ω–∏—Ö –≤—ã —Å–ª–µ–ø—ã.
2.  **–í—Å—ë –≤ SQL Server ‚Äî —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.** –î–∞–∂–µ —Å–ª—É–∂–µ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ‚Äî –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö.
3.  **–ö–ª—é—á –∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º ‚Äî `object_id`, `schema_id`, `database_id`.** –ó–∞–ø–æ–º–Ω–∏—Ç–µ —ç—Ç–∏ —Å—Ç–æ–ª–±—Ü—ã.
4.  **–û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∫ —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º –∑–∞–º–µ–Ω—è–µ—Ç 100 —â–µ–ª—á–∫–æ–≤ –≤ SSMS.**
5.  **–≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.** –†—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Äî —É–¥–µ–ª –Ω–æ–≤–∏—á–∫–∞, —Å–∫—Ä–∏–ø—Ç—ã ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∞.

**üîú –ß—Ç–æ –¥–∞–ª—å—à–µ?**
–í –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç–µ ‚Ññ9 –≤—ã:
*   –ù–∞–ø–∏—à–µ—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ –ë–î.
*   –ü–æ—Å—Ç—Ä–æ–∏—Ç–µ –æ—Ç—á—ë—Ç ¬´–°—Ö–µ–º—ã -> –¢–∞–±–ª–∏—Ü—ã -> –°—Ç–æ–ª–±—Ü—ã -> –ò–Ω–¥–µ–∫—Å—ã¬ª.
*   –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç–µ –ø–æ–∏—Å–∫ ¬´—Å—Ç—Ä–∞–Ω–Ω—ã—Ö¬ª –æ–±—ä–µ–∫—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–±–ª–∏—Ü –±–µ–∑ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞).

üìé **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º**

| –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ | –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç | –ö–ª—é—á–µ–≤—ã–µ —Å—Ç–æ–ª–±—Ü—ã |
| :--- | :--- | :--- |
| `sys.databases` | –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞ | `name`, `database_id`, `state_desc` |
| `sys.tables` | –¢–∞–±–ª–∏—Ü—ã —Ç–µ–∫—É—â–µ–π –ë–î | `name`, `object_id`, `schema_id` |
| `sys.schemas` | –°—Ö–µ–º—ã —Ç–µ–∫—É—â–µ–π –ë–î | `name`, `schema_id` |
| `sys.indexes` | –ò–Ω–¥–µ–∫—Å—ã –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü | `object_id`, `name`, `type_desc` |
| `sys.columns` | –°—Ç–æ–ª–±—Ü—ã –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü | `object_id`, `name`, `system_type_id` |
| `sys.types` | –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö | `name`, `system_type_id` |
| `sys.database_principals` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–æ–ª–∏ –ë–î | `name`, `principal_id`, `type_desc` |

---

üìú **–õ–∏—Ü–µ–Ω–∑–∏—è**: [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/)  
üë®‚Äçüè´ **–ê–≤—Ç–æ—Ä**: –†—É—Å–ª–∞–Ω –†–∏–Ω–∞—Ç–æ–≤–∏—á –°–∞—Ñ–∏—É–ª–∏–Ω  
üìÖ **–î–∞—Ç–∞**: 20.11.2025  

---

### üîô üìö üîú –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫—É—Ä—Å—É

| [–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/PR8.MD) | &nbsp; | [–°–ª–µ–¥—É—é—â–µ–µ –∑–∞–Ω—è—Ç–∏–µ](../LESSONS/PR9.MD) |
|:--------------------------------------:|:------:|:-------------------------------------:|
| üè† [–ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ8](../LESSONS/PR8.MD) | üìñ [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](../README.MD) | üíª [–ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ9](../LESSONS/PR9.MD) |
